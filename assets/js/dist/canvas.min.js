!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var e,d=Backbone.$;e=Marionette.Application.extend({onBeforeStart:function(){return window.location.origin!==window.parent.location.origin?void console.error("The Canvas has a different origin than the Sidebar"):void(window.parent.app?this.registerRemoteChannel():d(window.parent.document).on("DOMContentLoaded readystatechange load",this.registerRemoteChannel.bind(this)))},onStart:function(){this.allowableEvents=["canvas:dragstart","canvas:drag","canvas:dragend","template:load","history:restore","history:undo","history:redo","modal:apply","css:add","css:delete","css:update","css:clear","sidebar:setting:change","canvas:reset"],this.addEventListeners()},addEventListeners:function(){var a=this,b=function(){a.channel.trigger("canvas:reset")};document.addEventListener("click",b,!1),document.addEventListener("dragover",b,!1),window.addEventListener("resize",b,!1),d("a").attr({draggable:!1,target:"_blank"}),d("img").attr({draggable:!1}),d(document).on("keydown",function(b){b.ctrlKey&&89==b.keyCode&&(_.contains(["INPUT","SELECT","TEXTAREA"],b.target.tagName)||a.channel.trigger("history:redo"))}),d(document).on("keydown",function(b){b.ctrlKey&&90==b.keyCode&&(_.contains(["INPUT","SELECT","TEXTAREA"],b.target.tagName)||a.channel.trigger("history:undo"))})},registerRemoteChannel:function(){var a=parent.app.channel;this.channel.reply("sidebar:library",function(b){return a.request("sidebar:library",b)}),this.channel.reply("sidebar:settings",function(){return a.request("sidebar:settings")}),this.listenTo(a,"all",this.forwardRemoteEvent),a.trigger("canvas:initialize")},forwardRemoteEvent:function(a){_.contains(this.allowableEvents,a)&&this.channel.trigger.apply(this.channel,arguments)}}),b.exports=e},{}],2:[function(a,b,c){!function(b){"use strict";b.Container=a("./components/behaviors/container"),b.Draggable=a("./components/behaviors/draggable"),b.Droppable=a("./components/behaviors/droppable"),b.Editable=a("./components/behaviors/editable"),b.Movable=a("./components/behaviors/movable"),Marionette.Behaviors.behaviorsLookup=function(){return b},window.Tailor.Behaviors=b}(window.Tailor.Behaviors||{})},{"./components/behaviors/container":9,"./components/behaviors/draggable":10,"./components/behaviors/droppable":11,"./components/behaviors/editable":12,"./components/behaviors/movable":13}],3:[function(a,b,c){!function(b){"use strict";b.TailorSection=a("./components/elements/wrappers/view-section"),b.TailorBox=a("./components/elements/wrappers/view-box"),b.TailorCard=a("./components/elements/wrappers/view-card"),b.TailorHero=a("./components/elements/wrappers/view-hero"),b.TailorColumn=a("./components/elements/children/view-column"),b.TailorTab=a("./components/elements/children/view-tab"),b.TailorToggle=a("./components/elements/children/view-toggle"),b.TailorListItem=a("./components/elements/children/view-list-item"),b.TailorCarouselItem=a("./components/elements/children/view-carousel-item"),b.TailorTabs=a("./components/elements/containers/view-tabs"),b.TailorCarousel=a("./components/elements/containers/view-carousel"),b.Element=a("./components/elements/view-element"),b.Container=a("./components/elements/view-container"),b.Wrapper=a("./components/elements/view-container"),b.Child=a("./components/elements/view-container"),b.lookup=function(a,c){return a=a.replace(/_/g," ").replace(/(?: |\b)(\w)/g,function(a){return a.toUpperCase().replace(/\s+/g,"")}),b.hasOwnProperty(a)?b[a]:c&&(c=c.replace(/_/g," ").replace(/(?: |\b)(\w)/g,function(a){return a.toUpperCase().replace(/\s+/g,"")}),b.hasOwnProperty(c))?b[c]:b.Element},window.Tailor.Views=b}(window.Tailor.Views||{})},{"./components/elements/children/view-carousel-item":16,"./components/elements/children/view-column":17,"./components/elements/children/view-list-item":18,"./components/elements/children/view-tab":19,"./components/elements/children/view-toggle":20,"./components/elements/containers/view-carousel":25,"./components/elements/containers/view-tabs":26,"./components/elements/view-container":27,"./components/elements/view-element":28,"./components/elements/wrappers/view-box":29,"./components/elements/wrappers/view-card":30,"./components/elements/wrappers/view-hero":31,"./components/elements/wrappers/view-section":32}],4:[function(a,b,c){!function(b){"use strict";b.Container=a("./entities/models/elements/model-container"),b.Wrapper=a("./entities/models/elements/model-wrapper"),b.Child=a("./entities/models/elements/model-child"),b.Element=a("./entities/models/elements/element"),b.Section=a("./entities/models/elements/wrappers/section"),b.Row=a("./entities/models/elements/containers/row"),b.Column=a("./entities/models/elements/children/column"),b.GridItem=a("./entities/models/elements/children/grid-item"),b.Tabs=a("./entities/models/elements/containers/tabs"),b.Carousel=a("./entities/models/elements/containers/carousel"),b.lookup=function(a,c){return a=a.replace(/tailor_/g," ").replace(/_/g," ").replace(/(?: |\b)(\w)/g,function(a){return a.toUpperCase().replace(/\s+/g,"")}),b.hasOwnProperty(a)?b[a]:c&&(c=c.replace(/_/g," ").replace(/(?: |\b)(\w)/g,function(a){return a.toUpperCase().replace(/\s+/g,"")}),b.hasOwnProperty(c))?b[c]:b.Element},window.Tailor.Models=b}(window.Tailor.Models||{})},{"./entities/models/elements/children/column":43,"./entities/models/elements/children/grid-item":44,"./entities/models/elements/containers/carousel":45,"./entities/models/elements/containers/row":46,"./entities/models/elements/containers/tabs":47,"./entities/models/elements/element":48,"./entities/models/elements/model-child":50,"./entities/models/elements/model-container":52,"./entities/models/elements/model-wrapper":53,"./entities/models/elements/wrappers/section":54}],5:[function(a,b,c){Tailor.Objects=Tailor.Objects||{},function(b,c,d){"use strict";function j(a,c){i[a]="",c=_.isString(c)?c.trim():c,_.isEmpty(c)||_.each(g[a],function(d){var e=b.CSS.parseSelectors(d.selectors),f=b.CSS.parseDeclarations(d.declarations).replace(/\{\{(.*?)\}\}/g,c);i[a]+="\n"+e+" {"+f+"}"})}function k(){var a="";for(var b in i)i.hasOwnProperty(b)&&(a+=i[b]);f.innerHTML=a,e.trigger("resize")}var e=d(window),f=document.createElement("style");f.appendChild(document.createTextNode("")),f.setAttribute("media","screen"),f.setAttribute("id","tailor-canvas-css"),document.head.appendChild(f);var g=window._pageRules||[],h=["_tailor_section_width","_tailor_column_spacing","_tailor_element_spacing"],i={_tailor_section_width:"",_tailor_column_spacing:"",_tailor_element_spacing:"",_tailor_page_css:""};app.on("start",function(){var a=app.channel.request("sidebar:settings");a&&a.length&&a.each(function(a){var b=a.get("id"),c=a.get("value");c=_.isString(c)?c.trim():c,!_.isEmpty(c)&&i.hasOwnProperty(b)&&(g.hasOwnProperty(b)?j(b,a.get("value")):i[b]=a.get("value"))}),k()}),_.each(h,function(a){g.hasOwnProperty(a)&&c.Setting(a,function(b,c){j(a,b),k()})}),c.Setting("_tailor_page_css",function(a,b){i._tailor_page_css=a,k()}),c.Setting("_post_title",function(a,b){d("h1, h2, h1 a, h2 a").each(function(){b==this.textContent&&(this.textContent=a)})}),_.extend(b.Objects,{Carousel:a("./components/carousel"),PostsCarousel:a("./components/carousel-simple"),Tabs:a("./components/tabs"),Toggles:a("./components/toggles"),Map:a("./components/map"),Masonry:a("./components/masonry"),Slideshow:a("./components/slideshow"),Lightbox:a("./components/lightbox"),Parallax:a("./components/parallax")}),c.Element.onRender("tailor_carousel",function(a,b){var d=this,e={autoplay:"1"==a.autoplay,arrows:"1"==a.arrows,dots:!1,fade:"1"==a.fade&&"1"==a.items_per_row,slidesToShow:parseInt(a.items_per_row,10)||1,adaptiveHeight:!0};d.$el.tailorCarousel(e),c.Setting("_tailor_element_spacing",function(a,b){d.triggerAll("element:parent:change",d)})}),c.Element.onRender("tailor_column",function(a,b){var d=this;c.Setting("_tailor_column_spacing",function(a,b){d.triggerAll("element:parent:change",d)})}),c.Element.onRender("tailor_content",function(a,b){this.$el.tailorLightbox({disableOn:function(){return $el.hasClass("is-selected")}})}),c.Element.onRender("tailor_gallery",function(a,b){var e,c=this.$el;"carousel"==a.layout?(e={autoplay:"1"==a.autoplay,arrows:"1"==a.arrows,dots:"1"==a.dots,fade:"1"==a.fade&&"1"==a.items_per_row,infinite:!1,slidesToShow:parseInt(a.items_per_row,10)||2},c.tailorSimpleCarousel(e)):"slideshow"==a.layout?(e={autoplay:"1"==a.autoplay,arrows:"1"==a.arrows,dots:!1,fade:!0,items:".tailor-slideshow__slide",adaptiveHeight:!0,draggable:!1,speed:250},"1"==a.thumbnails&&(e.customPaging=function(a,b){var c=d(a.$slides[b]).data("thumb");return'<img class="slick-thumbnail" src="'+c+'">'},e.dots=!0),c.tailorSlideshow(e)):a.masonry&&c.tailorMasonry(),this.el.classList.contains("is-lightbox-gallery")&&c.tailorLightbox({disableOn:function(){return c.hasClass("is-selected")}})}),c.Element.onRender("tailor_map",function(a,b){this.$el.tailorGoogleMap()}),c.Element.onRender("tailor_posts",function(a,b){var d,c=this.$el;"carousel"==a.layout?(d={autoplay:"1"==a.autoplay,arrows:"1"==a.arrows,dots:"1"==a.dots,fade:"1"==a.fade&&"1"==a.items_per_row,infinite:!1,slidesToShow:parseInt(a.items_per_row,10)||2},this.$el.tailorSimpleCarousel(d)):a.masonry&&c.tailorMasonry()}),c.Element.onRender("tailor_section",function(a,b){var d=this;c.Setting("_tailor_section_width",function(a,b){d.triggerAll("element:parent:change",d)});var e=this.el.getAttribute("data-ratio");a.parallax&&e&&this.$el.tailorParallax({ratio:e})}),c.Element.onRender("tailor_tabs",function(a,b){this.$el.tailorTabs()}),c.Element.onRender("tailor_toggles",function(a,b){this.$el.tailorToggles()})}(window.Tailor,window.Tailor.Api,jQuery)},{"./components/carousel":15,"./components/carousel-simple":14,"./components/lightbox":33,"./components/map":34,"./components/masonry":35,"./components/parallax":36,"./components/slideshow":37,"./components/tabs":38,"./components/toggles":39}],6:[function(a,b,c){a("./utility/polyfills/classlist"),a("./utility/polyfills/raf");var d=a("./apps/canvas");window.app=new d,window.Tailor={Api:{Setting:a("./components/api/setting"),Element:a("./components/api/element")},CSS:a("./utility/css")},window.ajax=a("./utility/ajax"),function(b,c){"use strict";a("./canvas-behaviors"),a("./canvas-components"),a("./canvas-entities"),a("./canvas-preview"),null==document.getElementById("canvas")||null==document.getElementById("select")?console.error("The page canvas could not be initialized.  This could be caused by a plugin or theme conflict."):(b.addRegions({canvasRegion:{selector:"#canvas",regionClass:a("./modules/canvas/canvas-region")},selectRegion:{selector:"#select",regionClass:a("./modules/tools/select-region")}}),b.on("before:start",function(){b.module("entities:canvas",a("./entities/canvas"))}),b.on("start",function(){b.module("module:canvas",a("./modules/canvas")),b.module("module:tools",a("./modules/tools")),b.module("module:stylesheet",a("./modules/stylesheet"))})),c(document).ready(function(){b.start({elements:window._elements||[],nonces:window._nonces||[],l10n:window._l10n||[],mediaQueries:window._media_queries||{},cssRules:window._css_rules||{}})})}(window.app,jQuery)},{"./apps/canvas":1,"./canvas-behaviors":2,"./canvas-components":3,"./canvas-entities":4,"./canvas-preview":5,"./components/api/element":7,"./components/api/setting":8,"./entities/canvas":40,"./modules/canvas":55,"./modules/canvas/canvas-region":56,"./modules/stylesheet":58,"./modules/tools":60,"./modules/tools/select-region":61,"./utility/ajax":65,"./utility/css":66,"./utility/polyfills/classlist":67,"./utility/polyfills/raf":68}],7:[function(a,b,c){var d={render:[],destroy:[]},e=function(a,b,c){d.hasOwnProperty(a)&&"function"==typeof c&&(d[a][b]=d[a][b]||[],d[a][b].push(c))},f=function(a,b){var c=a.model,e=c.get("tag");b=b||c.get("atts"),d.render[e]&&_.each(d.render[e],function(d){d.apply(a,[b,c])})},g=function(a){var b=a.model,c=b.get("tag");d.destroy[c]&&_.each(d.destroy[c],function(c){c.apply(a,[b.get("atts"),b])})};window.app.listenTo(app.channel,"element:ready element:refresh",f),window.app.listenTo(app.channel,"element:destroy",g),b.exports={onRender:function(a,b){e("render",a,b)},onDestroy:function(a,b){e("destroy",a,b)}}},{}],8:[function(a,b,c){var d={},e=function(a){var b=a.get("id");d[b]&&_.each(d[b],function(b){b.apply(app,[a.get("value"),a.previous("value")])})};app.listenTo(app.channel,"sidebar:setting:change",e),b.exports=function(a,b){"function"==typeof b&&(d[a]=d[a]||[],d[a].push(b))}},{}],9:[function(a,b,c){b.exports=Marionette.Behavior.extend({events:{"container:add":"addChildView","container:remove":"removeChildView"},modelEvents:{"container:collapse":"onCollapse"},addChildView:function(a,b){if(b!==this.view){var c=this.view.$childViewContainer?this.view.$childViewContainer:this.$el,d=c.children().filter(":not( .tailor-column__helper )").index(b.$el);this.view._updateIndices(b,!0,d),this.view.proxyChildEvents(b),this.view.children.add(b,b.model.get("order")),b._parent=this,this.view.triggerAll("element:child:add",this.view,!1),a.stopPropagation()}},removeChildView:function(a,b){b!==this.view&&(this.view.stopListening(b),this.view.children.remove(b,b.model.get("order")),this.view._updateIndices(b,!1),delete b._parent,b.$el.detach(),this.view.triggerAll("element:child:remove",this.view,!1),a.stopPropagation())},onCollapse:function(a,b){var e,f,c=this.view,d=c.$el.index();_.each(b,function(a){e=this.view.children.findByModel(a),f=c.el.parentNode.children,e.$el.insertAfter(f[d]),d++,c.stopListening(e),c.children.remove(e),c._updateIndices(e,!1),delete e._parent,e.$el.trigger("container:add",e)},this),c.$el.trigger("container:remove",c),c.destroy()}})},{}],10:[function(a,b,c){b.exports=Marionette.Behavior.extend({events:{dragstart:"onDragStart",dragend:"onDragEnd",drag:"onDrag"},onDragStart:function(a){app.channel.trigger("canvas:dragstart",a.originalEvent,this.view)},onDrag:function(a){app.channel.trigger("canvas:drag",a.originalEvent,this.view)},onDragEnd:function(a){app.channel.trigger("canvas:dragend",a.originalEvent,this.view)}})},{}],11:[function(a,b,c){b.exports=Marionette.Behavior.extend({events:{dragover:"onDragOver",drop:"onDrop"},onDragOver:function(a){app.channel.trigger("canvas:dragover",a.originalEvent,this.view)},onDrop:function(a){app.channel.trigger("canvas:drop",a.originalEvent,this.view)}})},{}],12:[function(a,b,c){b.exports=Marionette.Behavior.extend({events:{mouseover:"onMouseOver",mouseout:"onMouseOut",click:"onClick"},modelEvents:{select:"selectElement"},collectionEvents:{edit:"onEdit"},onRender:function(){this.view.el.title="Shift-click to edit this element"},onClick:function(a){a.shiftKey?this.editElement():this.selectElement(),a.preventDefault(),a.stopPropagation()},onMouseOver:function(a){this.view.$el.addClass("is-hovering"),a.stopPropagation()},onMouseOut:function(a){this.view.$el.removeClass("is-hovering"),a.stopPropagation()},editElement:function(){app.channel.trigger("modal:open",this.view.model)},selectElement:function(){app.channel.trigger("canvas:select",this.view)},onEdit:function(a,b){this.view.$el.toggleClass("is-editing",a===this.view.model&&b)}})},{}],13:[function(a,b,c){b.exports=Marionette.Behavior.extend({modelEvents:{"add:child":"addChild","remove:child":"removeChild","insert:before":"insertBefore","insert:after":"insertAfter",insert:"insert",append:"append"},insert:function(a){a.trigger("append",this.view)},addChild:function(){this.view.$el.trigger("container:add",this.view)},removeChild:function(){this.view.$el.trigger("container:remove",this.view)},insertBefore:function(a){this.view.$el.insertBefore(a.$el)},insertAfter:function(a){this.view.$el.insertAfter(a.$el)},triggerEvent:function(a){a.$el.trigger("before:element:child:add",this.view)},append:function(a){var b=a.$childViewContainer?a.$childViewContainer:a.$el;this.view.$el.appendTo(b)}})},{}],14:[function(a,b,c){var e,d=window.jQuery;e=function(a,b,c){this.el=a,this.$el=d(a),this.$wrap=this.$el.find(".tailor-carousel__wrap").first(),this.options=d.extend({},this.defaults,b),document.documentElement.dir&&"rtl"==document.documentElement.dir&&(this.options.rtl=!0),this.callbacks=d.extend({},this.callbacks,c),this.initialize()},e.prototype={defaults:{items:".tailor-carousel__item",prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button"></button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button"></button>',adaptiveHeight:!0,draggable:!1,speed:250,slidesToShow:1,slidesToScroll:1,autoplay:!1,arrows:!1,dots:!0,fade:!1},callbacks:{onInitialize:function(){},onDestroy:function(){}},initialize:function(){this.slick(this.addEventListeners),"function"==typeof this.callbacks.onInitialize&&this.callbacks.onInitialize.call(this)},addEventListeners:function(){this.$el.on("before:element:refresh",d.proxy(this.unSlick,this)).on("element:change:parent",d.proxy(this.maybeRefreshSlick,this)).on("before:element:copy",d.proxy(this.unSlick,this)).on("element:copy",d.proxy(this.slick,this)).on("before:element:destroy",d.proxy(this.maybeDestroy,this)).on("element:parent:change",d.proxy(this.maybeRefreshSlick,this))},maybeSlick:function(a){a.target==this.el&&this.slick()},maybeRefreshSlick:function(a){a.target==this.el&&this.refreshSlick()},maybeUnSlick:function(a){a.target==this.el&&this.unSlick()},maybeDestroy:function(a){a.target==this.el&&this.destroy(a)},slick:function(a){var b=this;this.$el.imagesLoaded(function(){b.$wrap.slick(b.options),"function"==typeof a&&a.call(b)})},refreshSlick:function(){this.$wrap.slick("refresh")},unSlick:function(){this.$wrap.slick("unslick")},destroy:function(){this.$el.off(),this.unSlick(),"function"==typeof this.callbacks.onDestroy&&this.callbacks.onDestroy.call(this)}},d.fn.tailorSimpleCarousel=function(a,b){return this.each(function(){var c=d.data(this,"tailorSimpleCarousel");c||d.data(this,"tailorSimpleCarousel",new e(this,a,b))})}},{}],15:[function(a,b,c){var e,d=window.jQuery;e=function(a,b,c){this.el=a,this.$el=d(a),this.$wrap=this.$el.find(".tailor-carousel__wrap").first(),this.options=d.extend({},this.defaults,b),document.documentElement.dir&&"rtl"==document.documentElement.dir&&(this.options.rtl=!0),this.callbacks=d.extend({},this.callbacks,c),this.initialize()},e.prototype={defaults:{items:".tailor-carousel__item",prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button"></button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button"></button>',adaptiveHeight:!1,draggable:!1,speed:250,slidesToShow:1,slidesToScroll:1,initialSlide:0,autoplay:!1,arrows:!1,dots:!1,fade:!1,infinite:!1},callbacks:{onInitialize:function(){},onDestroy:function(){}},initialize:function(){this.slickAt(0,this.addEventListeners),"function"==typeof this.callbacks.onInitialize&&this.callbacks.onInitialize.call(this)},addEventListeners:function(){this.$el.on("before:element:refresh",d.proxy(this.maybeUnSlick,this)).on("element:refresh",d.proxy(this.refreshSlick,this)).on("element:change:parent",d.proxy(this.maybeRefreshSlick,this)).on("before:element:copy",d.proxy(this.maybeUnSlick,this)).on("element:copy",d.proxy(this.maybeSlick,this)).on("element:parent:change",d.proxy(this.maybeRefreshSlick,this)).on("before:element:destroy",d.proxy(this.maybeDestroy,this)).on("before:element:child:ready",d.proxy(this.maybeUnSlick,this)).on("element:child:ready",d.proxy(this.onReadyChild,this)).on("element:child:add",d.proxy(this.refreshSlick,this)).on("element:child:remove",d.proxy(this.onDestroyDescendant,this)).on("before:element:child:refresh",d.proxy(this.maybeUnSlick,this)).on("element:child:refresh",d.proxy(this.maybeSlick,this)).on("before:element:change:order",d.proxy(this.maybeUnSlick,this)).on("element:change:order",d.proxy(this.onReorderChild,this)).on("before:element:child:destroy",d.proxy(this.maybeUnSlick,this)).on("element:child:destroy",d.proxy(this.onDestroyChild,this)).on("element:descendant:add",d.proxy(this.refreshSlick,this)).on("element:descendant:remove",d.proxy(this.refreshSlick,this)).on("element:descendant:ready",d.proxy(this.refreshSlick,this)).on("element:descendant:destroy",d.proxy(this.onDestroyDescendant,this))},querySelectors:function(){this.$dots&&this.$dots.off();var a=this;if(a.$items=a.$wrap.find(" > "+a.options.items),a.$dots=a.$el.children(".slick-dots").find(" > li"),a.$dots.on("click",function(b){var c=d(b.currentTarget);a.currentSlide=c.data("id"),a.$wrap.slick("slickGoTo",c.index()),b.preventDefault()}),!a.currentSlide){var b=a.$items.filter(function(){return this.classList.contains("slick-current")});a.currentSlide=b.length?b.id:a.$items[0].id}},updateDots:function(a){this.$dots.each(function(b,c){a==b?c.classList.add("slick-active"):c.classList.remove("slick-active")}),this.$dots.toggle(this.$dots.length/this.options.slidesToShow>1)},onReadyChild:function(a,b){a.target==this.el?this.slickAt(b.$el.index()):this.refreshSlick()},onReorderChild:function(a,b,c,d){if(a.target===this.el){this.querySelectors();var e=this.$items.filter(function(){return this.id==b});d-c<0?e.insertAfter(this.$items[c]):e.insertBefore(this.$items[c]),this.slickAt(c)}},onDestroyChild:function(a,b){var c=b.$el.index();b.$el.remove(),this.slickAt(c)},onDestroyDescendant:function(a,b){b.$el.detach(),this.refreshSlick()},maybeSlick:function(a){a.target==this.el&&this.slick()},maybeRefreshSlick:function(a){a.target==this.el&&this.refreshSlick()},maybeUnSlick:function(a){a.target==this.el&&this.unSlick()},maybeDestroy:function(a){a.target==this.el&&this.destroy(a)},slickAt:function(a,b){this.querySelectors();var c=this.$items.length;if(c){a=Math.min(a,c-1),a<this.options.slidesToShow&&(a=0);var d=this.$items[a];this.currentSlide=d.id,this.slick(b),this.updateDots(a)}},slick:function(a){var b=this,c=this.currentSlide,e=this.$dots.filter(function(){return this.getAttribute("data-id")==c}).index(),f=d.extend({},this.options,{autoplay:!1,fade:!1,initialSlide:e});b.$wrap.slick(f).on("beforeChange",function(a,c,d,e){c.$slider[0]==b.$wrap[0]&&d!=e&&b.updateDots(e)}),"function"==typeof a&&a.call(b)},refreshSlick:function(){this.$wrap.slick("refresh")},unSlick:function(){this.$wrap.slick("unslick")},destroy:function(){this.$el.off(),this.unSlick(),"function"==typeof this.callbacks.onDestroy&&this.callbacks.onDestroy.call(this)}},d.fn.tailorCarousel=function(a,b){return this.each(function(){var c=d.data(this,"tailorCarousel");c||d.data(this,"tailorCarousel",new e(this,a,b))})}},{}],16:[function(a,b,c){var e,d=a("./../view-container");e=d.extend({onRenderTemplate:function(){this.el.draggable=!1,this.el.id=this.model.cid}}),b.exports=e},{"./../view-container":27}],17:[function(a,b,c){var e,d=a("./../view-container");e=d.extend({ui:{sizer:".tailor-column__sizer"},events:{"mousedown @ui.sizer":"onResize"},modelEvents:{"change:atts":"onChangeAttributes","change:width":"onChangeWidth"},onRenderCollection:function(){this.updateClassName(this.model.get("atts").width),this.$el.attr("draggable",!0).prepend('<div class="tailor-column__helper"><div class="tailor-column__sizer"></div></div>')},onResize:function(a){function f(a){document.body.classList.add("is-resizing"),document.body.style.cursor="col-resize";var e=b.el.getBoundingClientRect(),f=_.clone(c.get("atts")),g=_.clone(d.get("atts")),h=parseInt(f.width),i=parseInt(g.width),j=Math.round((a.clientX-e.left)/e.width*h);j<1||j+1>h+i||j==h||(f.width=j,g.width=i-(j-h),c.set("atts",f,{silent:!0}),d.set("atts",g,{silent:!0}),c.trigger("change:width",c,f.width),d.trigger("change:width",d,g.width))}function g(a){document.removeEventListener("mousemove",f,!1),document.removeEventListener("mouseup",g,!1),document.body.classList.remove("is-resizing"),document.body.style.cursor="default",e!=c.get("atts").width&&app.channel.trigger("element:resize",c)}var b=this,c=b.model,d=c.collection.findWhere({parent:c.get("parent"),order:c.get("order")+1}),e=c.get("atts").width;return document.addEventListener("mousemove",f,!1),document.addEventListener("mouseup",g,!1),app.channel.trigger("canvas:reset"),!1},onChangeWidth:function(a,b){this.updateClassName(b),this.triggerAll("element:parent:change",this)},updateClassName:function(a){this.$el.removeClass(function(a,b){return(b.match(/(^|\s)columns-\S+/g)||[]).join(" ")}),this.el.classList.add("columns-"+a)}}),b.exports=e},{"./../view-container":27}],18:[function(a,b,c){var e,d=a("./../view-container");e=d.extend({childViewContainer:".tailor-list__content"}),b.exports=e},{"./../view-container":27}],19:[function(a,b,c){var e,d=a("./../view-container");e=d.extend({onRenderTemplate:function(){this.el.draggable=!1,this.el.id=this.model.cid}}),b.exports=e},{"./../view-container":27}],20:[function(a,b,c){var e,d=a("./../view-container");e=d.extend({childViewContainer:".tailor-toggle__body"}),b.exports=e},{"./../view-container":27}],21:[function(a,b,c){b.exports=Marionette.ItemView.extend({tagName:"li",attributes:function(){return{"data-id":this.model.cid}},getTemplate:function(){return _.template('<button data-role="none" role="button" aria-required="false" tabindex="0"></button>')}})},{}],22:[function(a,b,c){b.exports=Marionette.CollectionView.extend({tagName:"ul",className:"slick-dots",childView:a("./navigation-carousel-item"),events:{dragstart:"onDragStart"},onDragStart:function(a){app.channel.trigger("canvas:reset"),a.stopPropagation()},onRender:function(){var a=this;this.sortable=new Sortable(a.el,{draggable:"li",animation:150,onUpdate:function(b){var c=a.$el.parent();c.trigger("before:element:change:order"),c.trigger("element:change:order",[b.item.getAttribute("data-id"),b.newIndex,b.oldIndex]),app.channel.trigger("element:change:order",a.model)}})},buildChildView:function(a,b,c){var d=_.extend({model:a,collection:this.collection},c);return new b(d)},filter:function(a,b,c){return a.get("parent")===this.model.get("id")},onBeforeDestroy:function(){this.sortable.destroy()}})},{"./navigation-carousel-item":21}],23:[function(a,b,c){b.exports=Marionette.ItemView.extend({tagName:"li",className:function(){return"tailor-tabs__navigation-item tailor-"+this.model.get("id")},modelEvents:{"change:atts":"onChangeAttributes"},attributes:function(){return{"data-id":this.model.cid}},getTemplate:function(){return _.template('<%= title || "Tab" %>')},serializeData:function(){var a=Marionette.ItemView.prototype.serializeData.apply(this,arguments),b=this.model.get("atts");return a.title=b.title,a},onChangeAttributes:function(a,b){this.el.innerHTML=b.title||"Tab"}})},{}],24:[function(a,b,c){b.exports=Marionette.CollectionView.extend({childView:a("./navigation-tab"),events:{dragstart:"onDragStart"},onDragStart:function(a){app.channel.trigger("canvas:reset"),a.stopPropagation()},buildChildView:function(a,b,c){var d=_.extend({model:a,collection:this.collection},c);return new b(d)},filter:function(a,b,c){return a.get("parent")===this.model.get("id")},onRender:function(){var a=this;this.sortable=new Sortable(a.el,{draggable:".tailor-tabs__navigation-item",animation:150,onUpdate:function(b){var c=a.$el.parent();c.trigger("before:element:change:order"),c.trigger("element:change:order",[b.item.getAttribute("data-id"),b.newIndex,b.oldIndex]),app.channel.trigger("element:change:order",a.model)}})},onBeforeDestroy:function(){this.sortable.destroy()}})},{"./navigation-tab":23}],25:[function(a,b,c){var e,d=a("./../view-container");e=d.extend({childViewContainer:".tailor-carousel__wrap",events:{"element:change:order":"onReorderElement"},onReorderElement:function(a,b,c,d){c-d<0?this.children.each(function(a){a._index>=c&&a._index<=d&&(a._index==d?a._index=c:a._index++,a.model.set("order",a._index))},this):this.children.each(function(a){a._index>=d&&a._index<=c&&(a._index==d?a._index=c:a._index--,a.model.set("order",a._index))},this),this.model.collection.sort()},onBeforeRenderTemplate:function(){this.navigation&&this.navigation.triggerMethod("destroy")},onRenderTemplate:function(){var b=a("./navigation/navigation-carousel");this.navigation=new b({model:this.model,collection:this.collection,sort:!1}),this.$el.append(this.navigation.render().el)},onBeforeDestroy:function(){this.triggerAll("before:element:destroy",this),this.navigation.triggerMethod("destroy")}}),b.exports=e},{"./../view-container":27,"./navigation/navigation-carousel":22}],26:[function(a,b,c){var e,d=a("./../view-container");e=d.extend({ui:{navigation:".tailor-tabs__navigation"},childViewContainer:".tailor-tabs__content",events:{"element:change:order":"onReorderElement"},onReorderElement:function(a,b,c,d){c-d<0?this.children.each(function(a){a._index>=c&&a._index<=d&&(a._index==d?a._index=c:a._index++,a.model.set("order",a._index))},this):this.children.each(function(a){a._index>=d&&a._index<=c&&(a._index==d?a._index=c:a._index--,a.model.set("order",a._index))},this),this.model.collection.sort()},onBeforeRenderTemplate:function(){this.navigation&&this.navigation.triggerMethod("destroy")},onRenderTemplate:function(){var b=a("./navigation/navigation-tabs");this.navigation=new b({el:this.ui.navigation,model:this.model,collection:this.collection,sort:!1}),this.navigation.render()},childRefreshed:function(a){a.el.id=a.model.cid,a.el.classList.add("is-active"),this.triggerAll("element:child:refresh",a)},onBeforeDestroy:function(){this.triggerAll("before:element:destroy",this),this.navigation.triggerMethod("destroy")}}),b.exports=e},{"./../view-container":27,"./navigation/navigation-tabs":24}],27:[function(a,b,c){var e;window.jQuery;e=Marionette.CompositeView.extend({behaviors:{Container:{},Draggable:{},Droppable:{},Editable:{},Movable:{}},initialize:function(){this._isReady=!1,this._isBeingDestroyed=!1,this.addEventListeners()},addEventListeners:function(){this.listenTo(app.channel,"before:elements:restore",this.onBeforeDestroy)},getChildView:function(a){return window.Tailor.Views.lookup(a.get("tag"),a.get("type"))},buildChildView:function(a,b,c){var d=_.extend({model:a,collection:this.collection},c);return new b(d)},filter:function(a,b,c){return a.get("parent")===this.model.get("id")},attachElContent:function(a){var b=jQuery(a);return this.$el.replaceWith(b),this.setElement(b),this.el.setAttribute("draggable",!0),this},getTemplateId:function(){return"tmpl-tailor-"+this.model.get("id")},getTemplate:function(){var b,a=document.querySelector("#"+this.getTemplateId());return a?(b=_.template(a.innerHTML),a.parentElement.removeChild(a)):(a=document.querySelector("#tmpl-tailor-"+this.model.get("tag")+"-default"),b=_.template(a.innerHTML)),b},updateTemplate:function(a){var b=this.getTemplateId(),c=document.querySelector("#"+b);c||(c=document.createElement("script"),c.setAttribute("type","text/html"),c.id=b,document.body.appendChild(c)),c.innerHTML=a},renderTemplate:function(){this._ensureViewIsIntact();var a=this.getChildViewContainer(this),b=a.contents().detach();return this.resetChildViewContainer(),this._renderTemplate(),a=this.getChildViewContainer(this),a.append(b),this},_updateIndices:function(a,b,c){b&&(a._index=c,a.model._changing=!1,a.model.set("order",c)),this.children.each(function(c){c._index>=a._index&&(c._index+=b?1:-1,c.model.set("order",c._index))},this)},onBeforeRender:function(){this.triggerAll("before:element:ready",this)},onDomRefresh:function(){this.el.setAttribute("draggable",!0),this.$el.find("a").attr({draggable:!1,target:"_blank"}),this.$el.find("img").attr({draggable:!1})},onBeforeDestroy:function(){this.triggerAll("before:element:destroy",this)},onDestroy:function(){this.triggerAll("element:destroy",this)},modelEvents:{
	"change:atts":"onChangeAttributes","change:parent":"onChangeParent"},onChangeAttributes:function(a,b){a=this.model.toJSON(),a.atts=b?b:{};var c=this,d={data:{model:JSON.stringify(a),nonce:window._nonces.render},success:function(a){c.updateTemplate(a.html),app.channel.trigger("css:update",c.model.get("id"),a.css)},error:function(){c.updateTemplate("The template for "+c.cid+" could not be refreshed")},complete:function(){var b=c.$el.hasClass("is-editing"),d=c.$el.hasClass("is-selected");c.$el.removeClass("is-rendering"),c.triggerAll("before:element:refresh",c,a.atts),c.renderTemplate(),c.triggerAll("element:refresh",c,a.atts),c.refreshChildren(),b&&c.$el.addClass("is-editing"),d&&c.$el.addClass("is-selected")}};c.el.classList.add("is-rendering"),window.ajax.send("tailor_render",d)},onChangeParent:function(){this.triggerAll("element:change:parent",this),this.refreshChildren()},childEvents:{"before:element:ready":"beforeChildElementReady","element:ready":"childElementReady","before:element:refresh":"beforeChildElementRefreshed","element:refresh":"childElementRefreshed","before:element:destroy":"beforeChildElementDestroyed","element:destroy":"childElementDestroyed"},beforeChildElementReady:function(a){this._isReady&&this.triggerAll("before:element:child:ready",a)},childElementReady:function(a){if(this._isReady)this.triggerAll("element:child:ready",a);else{var b=this.children.filter(function(a){return a._isReady}).length;this.children.length==b&&(this._isReady=!0,this.triggerAll("element:ready",this),this.refreshChildren())}},beforeChildElementRefreshed:function(a){this.triggerAll("before:element:child:refresh",a)},childElementRefreshed:function(a){this.triggerAll("element:child:refresh",a)},beforeChildElementDestroyed:function(a){this._isBeingDestroyed||this.triggerAll("before:element:child:destroy",a)},childElementDestroyed:function(a){!this._isBeingDestroyed&&this.children.length>1&&this.triggerAll("element:child:destroy",a)},onElementParentChange:function(){this.refreshChildren()},onElementChildDestroy:function(){this.refreshChildren()},events:{"element:parent:change":"stopEventPropagation","before:element:ready":"stopEventPropagation","element:ready":"stopEventPropagation","before:element:refresh":"stopEventPropagation","element:refresh":"stopEventPropagation","before:element:destroy":"stopEventPropagation","element:destroy":"stopEventPropagation","before:element:copy":"stopEventPropagation","element:copy":"stopEventPropagation","element:child:add":"onDescendantAdded","element:child:remove":"onDescendantRemoved","before:element:child:ready":"stopEventPropagation","element:child:ready":"onDescendantReady","before:element:child:refresh":"stopEventPropagation","element:child:refresh":"stopEventPropagation","before:element:child:destroy":"stopEventPropagation","element:child:destroy":"onDescendantDestroyed"},onDescendantAdded:function(a,b){if(this._isReady)this.triggerAll("element:descendant:add",b),a.stopPropagation();else{var c=this.children.filter(function(a){return a._isReady}).length;this.children.length==c&&(this._isReady=!0,this.triggerAll("element:ready",this)),a.stopImmediatePropagation()}},onDescendantRemoved:function(a,b){("container"==this.model.get("type")&&this.children.length>1||this.children.length>0)&&this.triggerAll("element:descendant:remove",b),a.stopPropagation()},onDescendantReady:function(a,b){this._isReady?(this.triggerAll("element:descendant:add",b),this.refreshChildren(),a.stopPropagation()):(1==this.children.length&&this.children.contains(b)&&(this._isReady=!0,this.triggerAll("element:ready",this)),a.stopImmediatePropagation())},onDescendantDestroyed:function(a,b){("container"==this.model.get("type")&&this.children.length>1||this.children.length>0)&&this.triggerAll("element:descendant:destroy",b),a.stopPropagation()},refreshChildren:function(){this.children.each(function(a){a.triggerAll("element:parent:change",a)},this)},triggerAll:function(a,b,c){this.$el.trigger(a,b),this.triggerMethod(a,b),c?app.channel.trigger(a,this,c):app.channel.trigger(a,this)},stopEventPropagation:function(a){a.stopPropagation()}}),b.exports=e},{}],28:[function(a,b,c){var e,d=window.jQuery;e=Marionette.ItemView.extend({className:"element",attributes:{draggable:!0},behaviors:{Draggable:{},Droppable:{},Editable:{},Movable:{}},modelEvents:{"change:atts":"onChangeAttributes","change:parent":"onChangeParent"},initialize:function(){this._isReady=!1,this._isBeingDestroyed=!1,this.addEventListeners()},addEventListeners:function(){this.listenTo(app.channel,"before:elements:restore",this.onBeforeDestroy)},getTemplateId:function(){return"tmpl-tailor-"+this.model.get("id")},getTemplate:function(){var b,a=document.querySelector("#"+this.getTemplateId());return a?(b=_.template(a.innerHTML),a.parentElement.removeChild(a)):(a=document.querySelector("#tmpl-tailor-"+this.model.get("tag")+"-default"),b=_.template(a.innerHTML)),b},attachElContent:function(a){var b=d(a),c=b[0];return this.$el.replaceWith(c),this.setElement(c),this},updateTemplate:function(a){var b=this.getTemplateId(),c=document.querySelector("#"+b);c||(c=document.createElement("script"),c.setAttribute("type","text/html"),c.id=b,document.body.appendChild(c)),c.innerHTML=a},onChangeAttributes:function(a,b){var c=this;a=this.model.toJSON(),b&&(a.atts=b);var d={data:{model:JSON.stringify(a),nonce:window._nonces.render},success:function(a){c.updateTemplate(a.html),app.channel.trigger("css:update",c.model.get("id"),a.css)},error:function(a){c.updateTemplate("The template for "+c.cid+" could not be refreshed")},complete:function(){var b=c.$el.hasClass("is-editing"),d=c.$el.hasClass("is-selected");c.$el.removeClass("is-rendering"),c.triggerAll("before:element:refresh",c,a.atts),c.render(),c.triggerAll("element:refresh",c,a.atts),b&&c.$el.addClass("is-editing"),d&&c.$el.addClass("is-selected")}};c.el.classList.add("is-rendering"),window.ajax.send("tailor_render",d)},onChangeParent:function(){this.triggerAll("element:change:parent",this)},onBeforeRender:function(){this.triggerAll("before:element:ready",this)},onDomRefresh:function(){var a=this;this.el.setAttribute("draggable",!0),this.$el.find("a").attr({draggable:!1,target:"_blank"}),this.$el.find("img").attr({draggable:!1}),this.$el.imagesLoaded(function(){a._isReady=!0,a.triggerAll("element:ready",a)})},onBeforeDestroy:function(){this.triggerAll("before:element:destroy",this)},onDestroy:function(){this.triggerAll("element:destroy",this)},triggerAll:function(a,b,c){this.$el.trigger(a,b),this.triggerMethod(a,b),c?app.channel.trigger(a,this,c):app.channel.trigger(a,this)}}),b.exports=e},{}],29:[function(a,b,c){var e,d=a("./../view-container");e=d.extend({childViewContainer:".tailor-box__content"}),b.exports=e},{"./../view-container":27}],30:[function(a,b,c){var e,d=a("./../view-container");e=d.extend({childViewContainer:".tailor-card__content"}),b.exports=e},{"./../view-container":27}],31:[function(a,b,c){var e,d=a("./../view-container");e=d.extend({childViewContainer:".tailor-hero__content"}),b.exports=e},{"./../view-container":27}],32:[function(a,b,c){var e,d=a("./../view-container");e=d.extend({attributes:{draggable:!0},modelEvents:{"change:atts":"onChangeAttributes","change:order":"onChangeOrder"},childViewContainer:".tailor-section__content",onChangeOrder:function(){jQuery(window).trigger("resize")}}),b.exports=e},{"./../view-container":27}],33:[function(a,b,c){var e,d=window.jQuery;e=function(a,b,c){this.el=a,this.$el=d(a),this.options=d.extend({},this.defaults,this.$el.data(),b),this.callbacks=d.extend({},this.callbacks,c),this.initialize()},e.prototype={defaults:{type:"image",delegate:".is-lightbox-image",closeMarkup:'<button title="%title%" type="button" class="not-a-button mfp-close">&#215;</button>',gallery:{enabled:!0,arrowMarkup:'<button title="%title%" type="button" class="not-a-button mfp-arrow mfp-arrow-%dir%"></button>'},image:{titleSrc:function(a){return a.el.find("figcaption").text()}}},callbacks:{onInitialize:function(){},onDestroy:function(){}},initialize:function(){this.magnificPopup(),this.addEventListeners(),"function"==typeof this.callbacks.onInitialize&&this.callbacks.onInitialize.call(this)},addEventListeners:function(){this.$el.on("before:element:destroy",d.proxy(this.destroy,this))},magnificPopup:function(){this.$el.magnificPopup(this.options)},destroy:function(a){a.target==this.el&&(this.$el.off(),"function"==typeof this.callbacks.onDestroy&&this.callbacks.onDestroy.call(this))}},d.fn.tailorLightbox=function(a,b){return this.each(function(){var c=d.data(this,"tailorLightbox");c||d.data(this,"tailorLightbox",new e(this,a,b))})}},{}],34:[function(a,b,c){var e,d=window.jQuery;e=function(a,b,c){this.el=a,this.$el=d(a),this.$win=d(window),this.options=d.extend({},this.defaults,this.$el.data(),b),this.callbacks=d.extend({},this.callbacks,c),this.initialize()},e.prototype={defaults:{height:450,address:"",latitude:"",longitude:"",zoom:12,draggable:1,scrollwheel:0,controls:0,hue:null,saturation:0},callbacks:{onInitialize:function(){},onDestroy:function(){}},getStyles:function(a,b){return[{featureType:"all",elementType:"all",stylers:[{saturation:a?a:null},{hue:b?b:null}]},{featureType:"water",elementType:"all",stylers:[{hue:b?b:null},{saturation:a?a:null},{lightness:50}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"simplified"}]}]},initialize:function(){var a=this;this.markers=[],this.infoWindows=[],this.$canvas=this.$el.find(".tailor-map__canvas").height(this.options.height),this.getCoordinates(this.options).then(function(b){a.center=b;var c=a.options.controls,d={zoom:a.options.zoom,draggable:a.options.draggable,scrollwheel:a.options.scrollwheel,center:b,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!c,panControl:c,rotateControl:c,scaleControl:c,zoomControl:c,mapTypeControl:c,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_CENTER}},e=a.getStyles(a.options.saturation,a.options.hue);a.map=new google.maps.Map(a.$canvas[0],d),a.map.mapTypes.set("map_style",new google.maps.StyledMapType(e,{name:"Styled Map"})),a.map.setMapTypeId("map_style"),a.setupMarkers(a.$el,a.map),a.addEventListeners(),"function"==typeof a.callbacks.onInitialize&&a.callbacks.onInitialize.call(a)})},addEventListeners:function(){this.$el.on("element:change:parent",d.proxy(this.refresh,this)).on("before:element:destroy",d.proxy(this.maybeDestroy,this)).on("element:parent:change",d.proxy(this.refresh,this)),this.$win.on("resize",d.proxy(this.refresh,this))},maybeRefresh:function(a){a.target==this.el&&this.refresh()},refresh:function(){google.maps.event.trigger(this.map,"resize"),this.map.setCenter(this.center)},maybeDestroy:function(a){a.target==this.el&&this.destroy()},getCoordinates:function(a){return d.Deferred(function(b){if("undefined"==typeof google)b.reject(new Error("The Google Maps API is currently unavailable"));else if(""!=a.address){var c=new google.maps.Geocoder;c.geocode({address:a.address},function(c,d){google.maps.GeocoderStatus.OK==d?b.resolve(c[0].geometry.location):a.latitude&&a.longitude?b.resolve(new google.maps.LatLng(a.latitude,a.longitude)):b.reject(new Error(d))})}else a.latitude&&a.longitude?b.resolve(new google.maps.LatLng(a.latitude,a.longitude)):b.reject(new Error("No address or map coordinates provided"))}).promise()},setupMarkers:function(a,b){var c=this;this.$el.find(".tailor-map__marker").each(function(a,e){var f={address:"",latitude:"",longitude:"",image:""},g=_.extend({},f,d(e).data());c.getCoordinates(g).then(function(d){c.markers[a]=new google.maps.Marker({map:b,position:d,infoWindowIndex:a,icon:g.image}),"null"!=e.innerHTML&&(c.infoWindows[a]=new google.maps.InfoWindow({content:e.innerHTML}),google.maps.event.addListener(c.markers[a],"click",function(){e.innerHTML&&c.infoWindows[a].open(b,this)}))})})},destroy:function(){delete this.map,delete this.markers,delete this.infoWindows,this.$el.off(),this.$win.off("resize",d.proxy(this.refresh,this)),"function"==typeof this.callbacks.onDestroy&&this.callbacks.onDestroy.call(this)}},d.fn.tailorGoogleMap=function(a,b){return this.each(function(){var c=d.data(this,"tailorGoogleMap");c||d.data(this,"tailorGoogleMap",new e(this,a,b))})},b.exports=e},{}],35:[function(a,b,c){var e,d=window.jQuery;e=function(a,b,c){this.el=a,this.$el=d(a),this.$wrap=this.$el.find(".tailor-grid--masonry"),this.options=d.extend({},this.defaults,this.$el.data(),b),this.callbacks=d.extend({},this.callbacks,c),this.initialize()},e.prototype={defaults:{itemSelector:".tailor-grid__item"},callbacks:{onInitialize:function(){},onDestroy:function(){}},initialize:function(){this.shuffle(),"function"==typeof this.callbacks.onInitialize&&this.callbacks.onInitialize.call(this)},addEventListeners:function(){this.$el.on("before:element:refresh",d.proxy(this.maybeDestroy,this)).on("element:change:parent",d.proxy(this.refreshShuffle,this)).on("before:element:copy",d.proxy(this.maybeUnShuffle,this)).on("element:copy",d.proxy(this.maybeShuffle,this)).on("before:element:destroy",d.proxy(this.maybeDestroy,this)).on("element:parent:change",d.proxy(this.refreshShuffle,this))},maybeShuffle:function(a){a.target==this.el&&this.shuffle()},maybeRefreshShuffle:function(a){a.target==this.el&&this.refreshShuffle()},maybeUnShuffle:function(a){a.target==this.el&&this.unShuffle()},maybeDestroy:function(a){a.target==this.el&&this.destroy(a)},shuffle:function(){var a=this;this.$wrap.imagesLoaded(function(){a.$wrap.shuffle(a.options),a.addEventListeners()})},refreshShuffle:function(){this.$wrap.shuffle("update")},unShuffle:function(){this.$wrap.shuffle("destroy")},destroy:function(a){this.unShuffle(),this.$el.off(),"function"==typeof this.callbacks.onDestroy&&this.callbacks.onDestroy.call(this)}},d.fn.tailorMasonry=function(a,b){return this.each(function(){var c=d.data(this,"tailorMasonry");c||d.data(this,"tailorMasonry",new e(this,a,b))})},b.exports=e},{}],36:[function(a,b,c){function f(a){this.callback=a,this.ticking=!1}var e,d=window.jQuery;f.prototype={update:function(){this.callback&&this.callback(),this.ticking=!1},requestTick:function(){this.ticking||(requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this))),this.ticking=!0)},handleEvent:function(){this.requestTick()}};var g=0;e=function(a,b){this.id="tailor.parallax."+g++,this.options=d.extend(this.defaults,b),this.el=a.querySelector(this.options.selector),this.el&&(this.$el=d(a),this.$win=d(window),this.container={el:a},this.initialize())},e.prototype={defaults:{ratio:.25,selector:".tailor-section__background"},initialize:function(){this.onResizeCallback=d.proxy(this.onResize,this),this.onScrollCallback=d.proxy(this.onScroll,this),this.addEventListeners(),this.onResize()},addEventListeners:function(){this.$win.on("resize."+this.id,this.onResizeCallback).on("scroll."+this.id,this.onScrollCallback),this.$el.on("before:element:refresh",d.proxy(this.maybeDestroy,this)).on("before:element:destroy",d.proxy(this.maybeDestroy,this)).on("element:child:ready",this.onResizeCallback).on("element:child:add",this.onResizeCallback).on("element:child:remove",this.onResizeCallback).on("element:child:refresh",this.onResizeCallback).on("element:change:order",this.onResizeCallback).on("element:child:destroy",this.onResizeCallback)},removeEventListeners:function(){this.$win.off("resize."+this.id,this.onResizeCallback).off("scroll."+this.id,this.onScrollCallback),this.$el.off()},onResize:function(){this.setup(),this.doParallax()},onScroll:function(){requestAnimationFrame(this.doParallax.bind(this))},setup:function(){this.windowHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0);var a=this.container.el.getBoundingClientRect(),b=this.container.el.offsetHeight,c=a.top+window.pageYOffset;this.container.top=c,this.container.height=b,this.container.bottom=c+b,this.el.style.top="0px",this.el.style.height=Math.round(b+b*this.options.ratio)+"px"},inViewport:function(){var a=window.pageYOffset,b=a+this.windowHeight,c=this.container.top+this.container.height;return this.container.top<b&&a<c},doParallax:function(){if(this.inViewport()){var a=1-(this.container.bottom-window.pageYOffset)/(this.container.height+this.windowHeight),b=Math.round(a*this.container.height*this.options.ratio*100)/100;this.el.style[Modernizr.prefixed("transform")]="translate3d( 0px, -"+b+"px, 0px )"}},maybeDestroy:function(a){a.target==this.container.el&&this.destroy()},destroy:function(){this.removeEventListeners()}},d.fn.tailorParallax=function(a,b){return this.each(function(){var c=d.data(this,"tailorParallax");c||d.data(this,"tailorParallax",new e(this,a,b))})},b.exports=e},{}],37:[function(a,b,c){var e,d=window.jQuery;e=function(a,b,c){this.el=a,this.$el=d(a),this.$wrap=this.$el.find(".tailor-slideshow__slides"),this.options=d.extend({},this.defaults,this.$el.data(),b),document.documentElement.dir&&"rtl"==document.documentElement.dir&&(this.options.rtl=!0),this.callbacks=d.extend({},this.callbacks,c),this.initialize()},e.prototype={defaults:{items:".tailor-slideshow__slide",prevArrow:'<button type="button" data-role="none" class="lick-prev" aria-label="Previous" tabindex="0" role="button"></button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button"></button>',adaptiveHeight:!0,draggable:!1,speed:250,slidesToShow:1,slidesToScroll:1,autoplay:!1,arrows:!1,dots:!1,fade:!0},callbacks:{onInitialize:function(){},onDestroy:function(){}},initialize:function(){this.slick(),"function"==typeof this.callbacks.onInitialize&&this.callbacks.onInitialize.call(this)},addEventListeners:function(){this.$el.on("before:element:refresh",d.proxy(this.unSlick,this)).on("element:change:parent",d.proxy(this.maybeRefreshSlick,this)).on("before:element:copy",d.proxy(this.unSlick,this)).on("element:copy",d.proxy(this.slick,this)).on("before:element:destroy",d.proxy(this.maybeDestroy,this)).on("element:parent:change",d.proxy(this.maybeRefreshSlick,this))},maybeSlick:function(a){a.target==this.el&&this.slick()},maybeRefreshSlick:function(a){a.target==this.el&&this.refreshSlick()},maybeUnSlick:function(a){a.target==this.el&&this.unSlick()},maybeDestroy:function(a){a.target==this.el&&this.destroy(a)},slick:function(){var a=this;this.$el.imagesLoaded(function(){a.addEventListeners(),a.$wrap.slick(a.options)})},refreshSlick:function(){this.$wrap.slick("refresh")},unSlick:function(){this.$wrap.slick("unslick")},destroy:function(a){this.$el.off(),this.unSlick(),"function"==typeof this.callbacks.onDestroy&&this.callbacks.onDestroy.call(this)}},d.fn.tailorSlideshow=function(a,b){return this.each(function(){var c=d.data(this,"tailorSlideshow");c||d.data(this,"tailorSlideshow",new e(this,a,b))})}},{}],38:[function(a,b,c){var e,d=window.jQuery;e=function(a,b,c){this.el=a,this.$el=d(a),this.options=d.extend({},this.defaults,this.$el.data(),b),this.callbacks=d.extend({},this.callbacks,c),this.initialize()},e.prototype={defaults:{tabs:".tailor-tabs__navigation .tailor-tabs__navigation-item",content:".tailor-tabs__content .tailor-tab",initial:1},callbacks:{onInitialize:function(){},onDestroy:function(){}},initialize:function(){this.querySelectors(),this.setActive(),this.addEventListeners(),"function"==typeof this.callbacks.onInitialize&&this.callbacks.onInitialize.call(this)},addEventListeners:function(){this.$el.on("before:element:refresh",d.proxy(this.maybeDestroy,this)).on("before:element:destroy",d.proxy(this.maybeDestroy,this)).on("element:child:add element:child:ready",d.proxy(this.onChangeChild,this)).on("element:child:refresh",d.proxy(this.onChangeChild,this)).on("element:child:destroy",d.proxy(this.onDestroyChild,this)).on("element:change:order",d.proxy(this.onReorderChild,this))},querySelectors:function(){this.$tabs&&this.$tabs.off(),this.$content=this.$el.find(this.options.content),this.$tabs=this.$el.find(this.options.tabs).on("click",d.proxy(this.onClick,this))},setActive:function(){var b,a=this.$content.filter(function(){return this.classList.contains("is-active")});if(0==a.length){var c=this.options.initial-1;this.$content[c]&&(b=this.$content[c])}else b=a[0];b&&this.activate(b.id)},onClick:function(a){this.activate(a.target.getAttribute("data-id")),a.preventDefault()},onChangeChild:function(a,b){a.target==this.el&&(this.querySelectors(),this.activate(b.el.id))},onReorderChild:function(a,b,c,d){if(a.target==this.el){var e=this.$content.filter(function(){return this.id==b});d-c<0?e.insertAfter(this.$content[c]):e.insertBefore(this.$content[c]),this.activate(b)}},onDestroyChild:function(a,b){if(a.target===this.el&&(0!=b.$el.index()||b.el.nextSibling)){var c=b.el.nextSibling?b.el.nextSibling.id:b.el.previousSibling.id;b.$el.remove(),this.querySelectors(),this.activate(c)}},activate:function(a){this.$tabs.each(function(){this.classList.toggle("is-active",this.getAttribute("data-id")==a)}),this.$content.each(function(){d(this).toggle(this.id==a).toggleClass("is-active",this.id==a).children().each(function(a,b){var c=d(b);c.trigger("element:parent:change",c)})})},maybeDestroy:function(a){a.target==this.el&&this.destroy(a)},destroy:function(a){this.$el.off(),this.$tabs.off(),"function"==typeof this.callbacks.onDestroy&&this.callbacks.onDestroy.call(this)}},d.fn.tailorTabs=function(a,b){return this.each(function(){var c=d.data(this,"tailorTabs");c||d.data(this,"tailorTabs",new e(this,a,b))})},b.exports=e},{}],39:[function(a,b,c){var e,d=window.jQuery;e=function(a,b,c){this.el=a,this.$el=d(a),this.options=d.extend({},this.defaults,this.$el.data(),b),this.callbacks=d.extend({},this.callbacks,c),this.initialize()},e.prototype={defaults:{toggles:".tailor-toggle__title",content:".tailor-toggle__body",accordion:!1,initial:-1,speed:150},callbacks:{onInitialize:function(){},onDestroy:function(){}},initialize:function(){this.querySelectors(),this.addEventListeners();var a=this.options.initial-1;this.$toggles[a]&&this.activate(this.$toggles[a]),"function"==typeof this.callbacks.onInitialize&&this.callbacks.onInitialize.call(this)},addEventListeners:function(){this.$el.on("before:element:refresh",d.proxy(this.maybeDestroy,this)).on("before:element:destroy",d.proxy(this.maybeDestroy,this)).on("element:child:add element:child:ready",d.proxy(this.onChangeChild,this)).on("element:child:refresh",d.proxy(this.onChangeChild,this)).on("element:child:destroy",d.proxy(this.onChangeChild,this))},querySelectors:function(){this.$content=this.$el.find(this.options.content),this.$toggles=this.$el.find(this.options.toggles).off().on("click",d.proxy(this.onClick,this))},onClick:function(a){this.activate(a.target),a.preventDefault()},onChangeChild:function(a,b){a.target==this.el&&this.querySelectors()},activate:function(a){var b=this.options.speed,c=d(a);this.options.accordion?(this.$toggles.filter(function(){return this!==a}).removeClass("is-active"),this.$content.each(function(){var c=d(this);a.nextElementSibling==this?c.slideToggle(b).children().each(function(a,b){var c=d(b);c.trigger("element:parent:change",c)}):c.slideUp(b)})):this.$content.filter(function(){return a.nextElementSibling==this}).slideToggle(b).each(function(){d(this).children().each(function(a,b){var c=d(b);c.trigger("element:parent:change",c)})}),c.toggleClass("is-active")},maybeDestroy:function(a){a.target==this.el&&this.destroy(a)},destroy:function(a){this.$el.off(),this.$toggles.off(),"function"==typeof this.callbacks.onDestroy&&this.callbacks.onDestroy.call(this)}},d.fn.tailorToggles=function(a,b){return this.each(function(){var c=d.data(this,"tailorToggles");c||d.data(this,"tailorToggles",new e(this,a,b))})},b.exports=e},{}],40:[function(a,b,c){var f,d=window.jQuery,e=window.Tailor;e.Collections=e.Collections||{},e.Collections.Element=a("./collections/elements"),e.Collections.History=a("./collections/history"),f=Marionette.Module.extend({onBeforeStart:function(a){var b=this,c={getElements:function(a){return a?b.elementCollection.findWhere({id:a}):b.elementCollection},getHistory:function(a){return a?b.historyCollection.findWhere({id:a}):b.historyCollection},resetElements:function(a){if(a!==b.elementCollection.models){var e,c=document.getElementById("canvas");c.classList.add("is-loading");var f={data:{models:JSON.stringify(a),nonce:window._nonces.reset},success:function(b){a=b.models,e=b.templates,d("body").append(e),app.channel.trigger("css:clear"),app.channel.trigger("css:add",b.css)},complete:function(f){e&&(app.channel.trigger("before:elements:restore"),app.channel.trigger("canvas:reset"),b.elementCollection.reset(null),b.elementCollection.reset(a),app.channel.trigger("elements:restore"),d(window).trigger("resize")),c.classList.remove("is-loading")}};window.ajax.send("tailor_reset",f)}},loadTemplate:function(a,c,e){var g,h,f=document.getElementById("canvas");f.classList.add("is-loading");var i={data:{template_id:a.get("id"),nonce:window._nonces.loadTemplate},success:function(a){g=a.models,h=a.templates,d("body").append(h),app.channel.trigger("css:add",a.css)},complete:function(i){if(h){var j=[],k=[];_.each(g,function(a){""==a.parent?j.push(a):k.push(a)}),b.elementCollection.add(k,{silent:!0}),j.length>1?b.elementCollection.add(j,{at:e+1}):(j[0].parent=c,j[0].order=e,b.elementCollection.add(j)),app.channel.trigger("template:add",a),d(window).trigger("resize")}f.classList.remove("is-loading")}};window.ajax.send("tailor_load_template",i)}};app.channel.reply("canvas:elements",c.getElements),app.channel.reply("sidebar:history",c.getHistory),app.channel.on("elements:reset",c.resetElements),app.channel.on("template:load",c.loadTemplate),this.elementCollection=new e.Collections.Element(a.elements,{silent:!1}),this.historyCollection=new e.Collections.History,this.l10n=a.l10n},onStart:function(a){this.addEventListeners()},addEventListeners:function(){this.listenTo(this.elementCollection,"change:atts",this.onEditAttributes),this.listenTo(app.channel,"element:add",this.onAddElement),this.listenTo(app.channel,"element:copy",this.onCopyElement),this.listenTo(app.channel,"element:move",this.onMoveElement),this.listenTo(app.channel,"modal:apply",this.onEditElement),this.listenTo(app.channel,"element:delete",this.onDeleteElement),this.listenTo(app.channel,"element:resize",this.onResizeElement),this.listenTo(app.channel,"element:change:order",this.onReorderElement),this.listenTo(app.channel,"template:add",this.onAddTemplate),this.listenTo(app.channel,"history:restore",this.restoreSnapshot),this.listenTo(app.channel,"history:undo",this.undoStep),this.listenTo(app.channel,"history:redo",this.redoStep)},onEditAttributes:function(a,b){a.previous("atts")!==a.get("atts")&&app.channel.trigger("element:edit",a)},onAddElement:function(a){"library"==a.get("collection")&&this.saveSnapshot(this.l10n.added+" "+a.get("label"))},onEditElement:function(a,b){this.saveSnapshot(this.l10n.edited+" "+b.get("label"))},onCopyElement:function(a){this.saveSnapshot(this.l10n.copied+" "+a.get("label"))},onMoveElement:function(a){this.saveSnapshot(this.l10n.moved+" "+a.get("label"))},onDeleteElement:function(a){this.saveSnapshot(this.l10n.deleted+" "+a.get("label"))},onResizeElement:function(a){this.saveSnapshot(this.l10n.resized+" "+a.get("label"))},onReorderElement:function(a){this.saveSnapshot(this.l10n.reordered+" "+a.get("label"))},onAddTemplate:function(a){this.saveSnapshot(this.l10n.added+" "+this.l10n.template+" - "+a.get("label"))},saveSnapshot:function(a){this.historyCollection.save(a)},restoreSnapshot:function(a){this.historyCollection.restore(a)},undoStep:function(){this.historyCollection.undo()},redoStep:function(){this.historyCollection.redo()}}),b.exports=f},{"./collections/elements":41,"./collections/history":42}],41:[function(a,b,c){var e;Backbone.$;e=Backbone.Collection.extend({comparator:"order",model:function(a,b){var c=window.Tailor.Models.lookup(a.tag,a.type);return new c(a,b)},initialize:function(){this.addEventListeners()},addEventListeners:function(){this.listenTo(this,"change:parent",this.onChangeParent),this.listenTo(this,"add",this.onAdd),this.listenTo(this,"destroy",this.onDestroy),this.listenTo(this,"container:collapse",this.onCollapse),this.listenTo(this,"reset",this.onReset)},getParent:function(a){return this.findWhere({id:a.get("parent")})},getChildren:function(a){return this.where({parent:a.get("id")})},getSiblings:function(a){return this.where({parent:a.get("parent")})},hasSelectedParent:function(a){var b=app.channel.request("canvas:element:selected");if(!b||a===b)return!1;for(var c=a.get("parent"),d=this.findWhere({id:c});"undefined"!=typeof d;){if(b===d)return!0;c=d.get("parent"),d=this.get(c)}return!1},onChangeParent:function(a){var b=this.get(a.get("parent")),c=this.get(a.previous("parent"));this.sort({silent:!0}),this._checkParent(c),"tailor_column"===a.get("tag")&&(this._reBalanceColumns(b),this._reBalanceColumns(c))},onAdd:function(a,b,c){"tailor_column"==a.get("tag")&&c.rebalance&&this._reBalanceColumns(this.get(a.get("parent")))},onDestroy:function(a){var b=this.get(a.get("parent"));this._checkParent(b);var c=this.where({parent:a.get("id")});c.length&&_.each(c,function(a){a.trigger("destroy",a,this)},this),b&&"tailor_column"===a.get("tag")&&this._reBalanceColumns(b),0===this.length&&this.onEmpty()},onReset:function(){0===this.length&&this.onEmpty()},onEmpty:function(){var a=this.createSection(0);this.create([{tag:"tailor_content",atts:{},parent:a.get("id"),order:0}])},onCollapse:function(a,b){var c=a.get("parent");_.each(b,function(a){a.set("parent",c)},this)},_reBalanceColumns:function(a){var b=this.where({parent:a.get("id")}),c=b.length;_.each(b,function(b){var d=_.clone(b.get("atts"));d.width=12/c,b.set("atts",d,{silent:!0}),b.trigger("change:width",a,d.width)},this)},_checkParent:function(a){a&&("container"==a.get("type")&&this._checkCollapsibleContainer(a),this._checkChildren(a))},_checkCollapsibleContainer:function(a){var b=this.getLibrary().findWhere({tag:a.get("tag")}).get("child"),c=a.get("id"),d=this.filter(function(a){return c===a.get("parent")&&b===a.get("tag")});if(0===d.length)a.trigger("container:collapse",a,this.where({parent:c}));else if(1===d.length){var e=_.first(d);"tailor_row"===a.get("tag")&&e.trigger("container:collapse",e,this.where({parent:e.get("id")}))}},_checkChildren:function(a){var b=this.where({parent:a.get("id")});0===b.length&&a.trigger("destroy",a)},create:function(a,b){return b=b||{},a=_.isArray(a)?_.each(a,this.applyDefaults,this):this.applyDefaults(a),this.add(a,b)},getLibrary:function(){return this.library||app.channel.request("sidebar:library")},applyDefaults:function(a){var b=this.getLibrary().findWhere({tag:a.tag}),d=(b.get("label"),{label:b.get("label"),type:b.get("type"),child:b.get("child")});return a.atts=a.atts||{},_.each(b.get("settings"),function(b){a.atts[b.id]=a.atts[b.id]||b.value},this),_.extend(a,d)},createSection:function(a){return _.first(this.create([{tag:"tailor_section",label:this.getLibrary().findWhere({tag:"tailor_section"}).get("label"),order:a}],{at:a}))},createRow:function(a,b){var c=_.first(this.create([{tag:"tailor_row",parent:a,order:b}],{}));return this.create([{tag:"tailor_column",atts:{width:6},parent:c.get("id"),order:0},{tag:"tailor_column",atts:{width:6},parent:c.get("id"),order:1}])},createColumn:function(a,b){var c=this.where({parent:a}),d=_.first(this.create([{tag:"tailor_column",atts:{width:12/(c.length+1)},parent:a,order:b}],{rebalance:!0}));return d},insertChild:function(a,b){a&&(a.get("parent")!==b.get("id")&&a.trigger("remove:child"),b.trigger("insert",a),a.trigger("add:child"),a.set("parent",b.get("id")))},createContainer:function(a,b,c,d){var e=a.get("tag"),f=_.first(this.create([{tag:e,parent:b,order:c}],{at:c,silent:!0})),g=a.get("child"),h=this.getLibrary().findWhere({tag:g}).get("label"),i=this.create([{tag:g,label:h,atts:{},parent:f.get("id"),order:0},{tag:g,label:h,atts:{},parent:f.get("id"),order:1}],{silent:!0});d&&(_.first(d).set("parent",_.first(i).get("id"),{silent:!0}),_.last(d).set("parent",_.last(i).get("id"),{silent:!0})),this.trigger("add",f,this,{})},createWrapper:function(a,b,c,d){
	var e=_.first(this.create([{tag:a,parent:b,order:c}],{silent:!0}));return"undefined"==typeof d&&this.create([{tag:"tailor_content",atts:{},parent:e.get("id"),order:0}],{silent:!0}),this.trigger("add",e,this,{}),"undefined"!=typeof d&&this.insertChild(d,e),e}}),b.exports=e},{}],42:[function(a,b,c){var e;Backbone.$;e=Backbone.Collection.extend({maxSize:50,active:null,comparator:function(a){return-a.get("timestamp")},initialize:function(){this.elements=app.channel.request("canvas:elements"),this.addEventListeners(),this.save(window._l10n.initialized)},addEventListeners:function(){this.listenTo(this,"add",this.checkLength)},save:function(a){if(this.active){var b=this.indexOf(this.active);b>0&&this.remove(this.slice(0,b))}var c=this.add({label:a||"",elements:this.elements?this.elements.toJSON():[],time:this.getTime(),timestamp:_.now()});this.setActive(c)},getTime:function(){var d,a=new Date,b=a.getHours(),c=":";return b>12?(b-=12,d=" PM"):d=" AM",b+c+("0"+a.getMinutes()).slice(-2)+c+("0"+a.getSeconds()).slice(-2)+d},restore:function(a){var b=this.findWhere({timestamp:a});if(b&&b!==this.getActive()){this.setActive(b);var c=b.get("elements");app.channel.trigger("elements:reset",c)}},undo:function(){if(this.length){var a=this.at(this.indexOf(this.getActive())+1);a&&this.restore(a.get("timestamp"))}},redo:function(){if(this.length){var a=this.at(this.indexOf(this.getActive())-1);a&&this.restore(a.get("timestamp"))}},checkLength:function(){this.length>this.maxSize&&this.pop()},setActive:function(a){this.active=a,this.trigger("change:active",a)},getActive:function(){return this.active}}),b.exports=e},{}],43:[function(a,b,c){var f,e=(Backbone.$,a("./../model-child"));f=e.extend({validTarget:function(a,b){if(_.contains(["tailor_section","tailor_row"],a.get("tag"))||!_.contains(["left","right"],b))return!1;if("child"==a.get("type")&&a.get("tag")!=this.get("tag"))return!1;var c=this.collection.getSiblings(this);return a.get("parent")==this.get("parent")||c.length<4}}),b.exports=f},{"./../model-child":50}],44:[function(a,b,c){var f,e=(Backbone.$,a("./../model-child"));f=e.extend({validTarget:function(a,b){if("tailor_section"==a.get("tag")||_.contains(["top","bottom","center"],b))return!1;var c=this.collection.getParent(this);return c.get("tag")!=a.get("tag")&&a.get("tag")==this.get("tag")}}),b.exports=f},{"./../model-child":50}],45:[function(a,b,c){var f,e=(Backbone.$,a("./../model-container"));f=e.extend({createTemplate:function(a,b){var c=b.el.classList.contains("is-editing");this.beforeCopyElement(b);var d=b.getChildViewContainer(b),e=d.contents().detach(),f=b.$el.find(".slick-dots").detach();this.appendTemplate(a,b),d.append(e),f.insertAfter(d),this.afterCopyElement(a,b),c&&b.el.classList.add("is-editing")}}),b.exports=f},{"./../model-container":52}],46:[function(a,b,c){var f,e=(Backbone.$,a("./../model-container"));f=e.extend({validTarget:function(a,b){return"child"!=a.get("type")&&"tailor_section"!=a.get("tag")&&"center"!=b&&(_.contains(["top","bottom"],b)&&"tailor_column"!=a.get("tag"))}}),b.exports=f},{"./../model-container":52}],47:[function(a,b,c){var f,e=(Backbone.$,a("./../model-container"));f=e.extend({createTemplate:function(a,b){var c=b.el.classList.contains("is-editing");this.beforeCopyElement(b);var d=b.getChildViewContainer(b),e=d.contents().detach(),f=b.$el.find(".tailor-tabs__navigation"),g=f.children().detach();this.appendTemplate(a,b),d.append(e),f.append(g),this.afterCopyElement(a,b),c&&b.el.classList.add("is-editing")}}),b.exports=f},{"./../model-container":52}],48:[function(a,b,c){var f,e=(Backbone.$,a("./model-base"));f=e.extend({validTarget:function(a,b){if("child"==a.get("type")||_.contains(["tailor_section","tailor_column"],a.get("tag"))||"center"==b)return!1;var c=this.collection.getParent(this);return"tailor_row"==a.get("tag")?"tailor_section"==c.get("tag")&&_.contains(["top","bottom"],b):"child"==c.get("type")&&"tailor_column"!=c.get("tag")?"container"!=a.get("type")&&!_.contains(["left","right"],b):!_.contains(["wrapper","child"],c.get("type"))||(_.contains(["top","bottom"],b)?_.contains(["tailor_section","tailor_column"],c.get("tag"))||!_.contains(["container","wrapper","child"],a.get("type")):"tailor_section"==c.get("tag")||!_.contains(["left","right"],b))},initialize:function(){this.addEventListeners()},addEventListeners:function(){this.listenTo(this,"element:move:top",this.insertBefore),this.listenTo(this,"element:move:bottom",this.insertAfter),this.listenTo(this,"element:move:left",this.columnBefore),this.listenTo(this,"element:move:right",this.columnAfter),this.listenTo(this,"element:copy:top",this.copyBefore),this.listenTo(this,"element:copy:bottom",this.copyAfter),this.listenTo(this,"element:copy:left",this.copyColumnBefore),this.listenTo(this,"element:copy:right",this.copyColumnAfter),this.listenTo(this,"element:move:center",this.createChild),this.listenTo(this,"element:copy:center",this.copyChild)},copyBefore:function(a,b){var c=b.model.clone(),d=a.model.get("order")-1;c.set("id",c.cid),c.set("parent",a.model.get("parent")),c.set("order",d),this.createTemplate(c.cid,b),this.collection.add(c)},copyAfter:function(a,b){var c=b.model.clone(),d=a.model.get("order");c.set("id",c.cid),c.set("parent",a.model.get("parent")),c.set("order",d),this.createTemplate(c.cid,b),this.collection.add(c)},copyColumnBefore:function(a,b){var c=a.model,d=b.model.clone();if(d.set("id",d.cid),this.createTemplate(d.cid,b),"tailor_column"===c.get("tag")){var e=this.collection.createColumn(c.get("parent"),c.get("order")-1);d.set("parent",e.get("id")),this.collection.add(d)}else{var f=this.collection.createRow(c.get("parent"),c.get("order"));this.collection.insertChild(c,_.last(f)),d.set("parent",_.first(f).get("id")),this.collection.add(d)}},copyColumnAfter:function(a,b){var c=a.model,d=b.model.clone();if(d.set("id",d.cid),this.createTemplate(d.cid,b),"tailor_column"===c.get("tag")){var e=this.collection.createColumn(c.get("parent"),c.get("order"));d.set("parent",e.get("id")),this.collection.add(d)}else{var f=this.collection.createRow(c.get("parent"),c.get("order"));this.collection.insertChild(c,_.first(f)),d.set("parent",_.last(f).get("id")),this.collection.add(d)}},createChild:function(a,b){var c=a.model.get("id"),d=a.model.get("child"),e=this.collection.where({parent:c,tag:d}).length;this.appendTemplate(b.model.get("id"),b),this.collection.createWrapper(d,c,e,b.model)},copyChild:function(a,b){var c=a.model.get("id"),d=a.model.get("child"),e=this.collection.where({parent:c,tag:d}).length,f=this.collection.createWrapper(d,c,e,!1),g=b.model.clone();g.set("id",g.cid),g.set("parent",f.get("id")),g.set("order",0),this.createTemplate(g.cid,b),this.collection.add(g)},createTemplate:function(a,b){var c=b.el.classList.contains("is-editing");this.beforeCopyElement(b),this.appendTemplate(a,b),this.afterCopyElement(a,b),c&&b.el.classList.add("is-editing")}}),b.exports=f},{"./model-base":49}],49:[function(a,b,c){Backbone.Model.prototype.set=_.wrap(Backbone.Model.prototype.set,function(a,b,c,d){if(null==b)return this;var e;"object"==typeof b?(e=b,d=c):(e={})[b]=c,d||(d={});var f=a.call(this,e,d);return this._tracking&&_.each(e,_.bind(function(a,b){_.isEqual(this._original[b],a)?delete this._unsaved[b]:this._unsaved[b]=a},this)),f});var d=Backbone.Model.extend({_tracking:!1,_original:{},_unsaved:{},defaults:function(){return{id:this.cid,tag:"",label:"",atts:{},parent:"",order:0,collection:"element"}},isTracking:function(){return this._tracking},startTracking:function(){return this._tracking=!0,this.resetTracking(),this},stopTracking:function(){return this._tracking=!1,this._original={},this._unsaved={},this},resetTracking:function(){return this._original=_.clone(this.attributes),this._unsaved={},this},resetAttributes:function(){if(this._tracking)return this.attributes=this._original,this.resetTracking(),this.trigger("change:atts",this,this.get("atts")),this},toShortcode:function(){var a=this.get("tag"),b=this.get("atts"),c="",d="["+a;return _.each(b,function(a,b){a&&("content"===b?c=a:d+=_.isNumber(b)?/\s/.test(a)?' "'+a+'"':" "+a:" "+b+'="'+a+'"')},this),d+"]"+c+"[/"+a+"]"},insertBefore:function(a){this.trigger("remove:child"),this.trigger("insert:before",a),this.trigger("add:child"),this.set("parent",a.model.get("parent"))},insertAfter:function(a){this.trigger("remove:child"),this.trigger("insert:after",a),this.trigger("add:child"),this.set("parent",a.model.get("parent"))},columnBefore:function(a){var b=a.model,c=b.get("parent");if("tailor_column"===b.get("tag")){var d=this.collection.createColumn(c,b.get("order")-1);this.collection.insertChild(this,d)}else{var e=this.collection.createRow(c,b.get("order"));this.collection.insertChild(this,_.first(e)),this.collection.insertChild(b,_.last(e))}},columnAfter:function(a){var b=a.model,c=b.get("parent");if("tailor_column"===b.get("tag")){var d=this.collection.createColumn(c,b.get("order"));this.collection.insertChild(this,d)}else{var e=this.collection.createRow(c,b.get("order"));this.collection.insertChild(b,_.first(e)),this.collection.insertChild(this,_.last(e))}},beforeCopyElement:function(a){var b=a.el;a.triggerAll("before:element:copy",a),b.classList.remove("is-dragging"),b.classList.remove("is-hovering"),b.classList.remove("is-selected"),b.classList.remove("is-editing")},appendTemplate:function(a,b){var c=b.model.get("id"),d=document.createElement("script");d.setAttribute("type","text/html"),d.id="tmpl-tailor-"+a,d.innerHTML=b.el.outerHTML.replace(c,a),document.body.appendChild(d)},afterCopyElement:function(a,b){var c=b.model.get("id");b.$el.trigger("element:copy",b),app.channel.trigger("css:copy",c,a)}});b.exports=d},{}],50:[function(a,b,c){var f,e=(Backbone.$,a("./model-composite"));f=e.extend({validTarget:function(a,b){if("tailor_section"==a.get("tag")||_.contains(["left","right","center"],b))return!1;var c=this.collection.getParent(this);return c.get("tag")!=a.get("tag")&&a.get("tag")==this.get("tag")},initialize:function(){this.addEventListeners()},addEventListeners:function(){this.listenTo(this,"element:move:top",this.insertBefore),this.listenTo(this,"element:move:bottom",this.insertAfter),this.listenTo(this,"element:move:left",this.insertBefore),this.listenTo(this,"element:move:right",this.insertAfter),this.listenTo(this,"element:copy:top",this.copyBefore),this.listenTo(this,"element:copy:bottom",this.copyAfter),this.listenTo(this,"element:copy:left",this.copyBefore),this.listenTo(this,"element:copy:right",this.copyAfter)}}),b.exports=f},{"./model-composite":51}],51:[function(a,b,c){var f,e=(Backbone.$,a("./model-base"));f=e.extend({cloneContainer:function(a,b,c){var d=this.collection,e=a.model.clone();e.set("id",e.cid),e.set("parent",b),e.set("order",c),this.createTemplate(e.cid,a);var f=this.cloneChildren(a.children,e,[]);d.add(f,{silent:!0}),d.add(e),a.triggerMethod("element:refresh")},cloneChildren:function(a,b,c){return a.length&&a.each(function(a){var d=a.model.clone();d.set("id",d.cid),d.set("parent",b.get("id")),d.createTemplate(d.cid,a),c.push(d),a.children&&this.cloneChildren(a.children,d,c)},this),c},copyBefore:function(a,b){this.cloneContainer(b,a.model.get("parent"),a.model.get("order")-1)},copyAfter:function(a,b){this.cloneContainer(b,a.model.get("parent"),a.model.get("order"))},copyColumnBefore:function(a,b){var c=a.model.get("parent");if("tailor_column"===a.model.get("tag")){var d=this.collection.createColumn(c,a.model.get("order")-1);this.cloneContainer(b,d.get("id"),0)}else{var e=this.collection.createRow(c,a.model.get("order"));this.collection.insertChild(a.model,_.last(e)),this.cloneContainer(b,_.first(e).get("id"),0)}},copyColumnAfter:function(a,b){var c=a.model.get("parent");if("tailor_column"===a.model.get("tag")){var d=this.collection.createColumn(c,a.model.get("order"));this.cloneContainer(b,d.get("id"),0)}else{var e=this.collection.createRow(c,a.model.get("order"));this.collection.insertChild(a.model,_.first(e)),this.cloneContainer(b,_.last(e).get("id"),0)}},createTemplate:function(a,b){var c=b.el.classList.contains("is-editing");this.beforeCopyElement(b);var d=b.getChildViewContainer(b),e=d.contents().detach();this.appendTemplate(a,b),d.append(e),this.afterCopyElement(a,b),c&&b.el.classList.add("is-editing")}}),b.exports=f},{"./model-base":49}],52:[function(a,b,c){var f,e=(Backbone.$,a("./model-composite"));f=e.extend({validTarget:function(a,b){if("child"==a.get("type")||_.contains(["tailor_section","tailor_column"],a.get("tag")))return!1;var c=this.collection.getParent(this);return"tailor_row"==a.get("tag")?"tailor_section"==c.get("tag")&&_.contains(["top","bottom"],b):"center"==b?"container"!=a.get("type"):_.contains(["wrapper","child"],c.get("type"))?_.contains(["top","bottom"],b)?_.contains(["tailor_section","tailor_column"],c.get("tag"))||!_.contains(["container","wrapper","child"],a.get("type")):"tailor_section"==c.get("tag")||!_.contains(["left","right"],b):"container"!=a.get("type")},initialize:function(){this.addEventListeners()},addEventListeners:function(){this.listenTo(this,"element:move:top",this.insertBefore),this.listenTo(this,"element:move:bottom",this.insertAfter),this.listenTo(this,"element:move:left",this.columnBefore),this.listenTo(this,"element:move:right",this.columnAfter),this.listenTo(this,"element:copy:top",this.copyBefore),this.listenTo(this,"element:copy:bottom",this.copyAfter),this.listenTo(this,"element:copy:left",this.copyColumnBefore),this.listenTo(this,"element:copy:right",this.copyColumnAfter)}}),b.exports=f},{"./model-composite":51}],53:[function(a,b,c){var f,e=(Backbone.$,a("./model-composite"));f=e.extend({validTarget:function(a,b){if("child"==a.get("type")||_.contains(["tailor_section","tailor_column"],a.get("tag"))||"center"==b)return!1;var c=this.collection.getParent(this);return"tailor_row"==a.get("tag")?"tailor_section"==c.get("tag")&&_.contains(["top","bottom"],b):"child"==c.get("type")&&"tailor_column"!=c.get("tag")?"container"!=a.get("type")&&!_.contains(["left","right"],b):!_.contains(["container","wrapper","child"],c.get("type"))||("tailor_section"==c.get("tag")||!_.contains(["left","right"],b))},initialize:function(){this.addEventListeners()},addEventListeners:function(){this.listenTo(this,"element:move:top",this.insertBefore),this.listenTo(this,"element:move:bottom",this.insertAfter),this.listenTo(this,"element:move:left",this.columnBefore),this.listenTo(this,"element:move:right",this.columnAfter),this.listenTo(this,"element:copy:top",this.copyBefore),this.listenTo(this,"element:copy:bottom",this.copyAfter),this.listenTo(this,"element:copy:left",this.copyColumnBefore),this.listenTo(this,"element:copy:right",this.copyColumnAfter),this.listenTo(this,"element:move:center",this.createChild),this.listenTo(this,"element:copy:center",this.copyChild)},createChild:function(a,b){var c=a.model.get("id"),d=a.model.get("child"),e=this.collection.where({parent:c,tag:d}).length;this.createTemplate(b.model.get("id"),b),this.collection.createWrapper(d,c,e,b.model)},copyChild:function(a,b){var c=a.model.get("id"),d=a.model.get("child"),e=this.collection.where({parent:c,tag:d}).length,f=this.collection.createWrapper(d,c,e,!1);this.cloneContainer(b,f.get("id"),0)}}),b.exports=f},{"./model-composite":51}],54:[function(a,b,c){var f,e=(Backbone.$,a("./../model-wrapper"));f=e.extend({validTarget:function(a,b){return"tailor_section"==a.get("tag")&&!_.contains(["left","right","center"],b)}}),b.exports=f},{"./../model-wrapper":53}],55:[function(a,b,c){b.exports=Marionette.Module.extend({onStart:function(){this._model=null,this._isDragging=!1,this.addEventListeners(),this.showCanvas()},addEventListeners:function(){this.listenTo(app.channel,"canvas:dragstart",this.onDragStart),this.listenTo(app.channel,"canvas:dragover",this.onDragOver),this.listenTo(app.channel,"canvas:dragend",this.onDragEnd),this.listenTo(app.channel,"canvas:drop",this.onDrop)},showCanvas:function(){this.collection=app.channel.request("canvas:elements");var b=a("./canvas/canvas");app.canvasRegion.show(new b({collection:this.collection}))},onDragStart:function(a,b){var c=b.model.collection;if("function"!=typeof c.hasSelectedParent||!c.hasSelectedParent(b.model)){if(this._view=b,this._model=b.model,this._isDragging=!0,b.el.classList.add("is-dragging"),"element"==b.model.get("collection")){var d=window.DataTransfer||window.Clipboard;if("setDragImage"in d.prototype){var e=document.createElement("img");e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",a.dataTransfer.setDragImage(e,0,0)}}a.dataTransfer.effectAllowed="copyMove",a.dataTransfer.setData("Text",this._model.cid),a.stopPropagation()}},onDragOver:function(a,b){if(this._isDragging){if(a.pageY){var c=window.scrollY||document.documentElement.scrollTop;a.pageY-c<40?window.scrollTo(0,c-20):c+window.innerHeight-a.pageY<40&&window.scrollTo(0,c+20)}var d="element"===this._model.get("collection")&&a.shiftKey?"copy":"move";if("move"===d&&b.model===this._model)return this.reset(),void a.stopPropagation();var e=this._getDropRegion(a,b);b.model.validTarget(this._model,e)&&(a.dataTransfer.dropEffect=d,app.channel.trigger("canvas:guide",b,e),a.preventDefault(),a.stopPropagation())}},onDrop:function(a,b){if(this._isDragging){var c=this._model,d=this._getDropRegion(a,b);if(b.model.validTarget(c,d)){var e;if("element"===c.get("collection")){if(e=a.shiftKey?"copy":"move","move"===e&&b.model===c)return}else e="add";c.trigger("element:"+e+":"+d,b,this._view),app.channel.trigger("element:"+e,c),this.collection.sort({silent:!0}),a.preventDefault(),a.stopPropagation()}}},onDragEnd:function(a,b){this._isDragging&&(this._isDragging=!1,this._view.el.classList.remove("is-dragging"),this.reset(),app.channel.trigger("debug"))},reset:function(){app.channel.trigger("canvas:reset")},_getPoint:function(a){return a.targetTouches?{x:a.targetTouches[0].clientX,y:a.targetTouches[0].clientY}:{x:a.clientX,y:a.clientY}},_getDropRegion:function(a,b){var c=this._getPoint(a),d=b.el.getBoundingClientRect(),e=d.width/2,f=d.height/2,g=d.top+(d.height-f)/2,h=d.left+(d.width-e)/2;if(h<=c.x&&c.x<=h+e&&g<=c.y&&c.y<=g+f)return"center";var i=(c.x-(d.left+e))/e,j=(c.y-(d.top+f))/f;return Math.abs(i)>Math.abs(j)?i>0?"right":"left":j>0?"bottom":"top"}})},{"./canvas/canvas":57}],56:[function(a,b,c){b.exports=Backbone.Marionette.Region.extend({initialize:function(){this.listenTo(app.channel,"canvas:dragstart",this.onDragStart),this.listenTo(app.channel,"canvas:dragend",this.onDragEnd)},onDragStart:function(a,b,c){this.el.classList.add("is-active")},onDragEnd:function(a,b,c){this.el.classList.remove("is-active")}})},{}],57:[function(a,b,c){b.exports=Marionette.CollectionView.extend({behaviors:{Container:{}},getChildView:function(a){return window.Tailor.Views.lookup("TailorSection")},buildChildView:function(a,b,c){var d=_.extend({model:a,collection:this.collection},c);return new b(d)},filter:function(a,b,c){return!a.get("parent")},_updateIndices:function(a,b,c){b&&(a._index=c,a.model._changing=!1,a.model.set("order",c)),this.children.each(function(c){c._index>=a._index&&(c._index+=b?1:-1,c.model.set("order",c._index))},this)},triggerAll:function(a,b,c){this.$el.trigger(a,b),this.triggerMethod(a,b),c?app.channel.trigger(a,this,c):app.channel.trigger(a,this)}})},{}],58:[function(a,b,c){b.exports=Marionette.Module.extend({onStart:function(a){this.stylesheets=[],this.createSheets(a.mediaQueries||{}),this.addRules(a.cssRules||{}),this.addEventListeners()},addEventListeners:function(){var a=app.channel.request("canvas:elements");this.listenTo(a,"destroy",this.onDestroy),this.listenTo(app.channel,"css:add",this.addRules),this.listenTo(app.channel,"css:update",this.updateRules),this.listenTo(app.channel,"css:delete",this.deleteRules),this.listenTo(app.channel,"css:clear",this.clearRules),this.listenTo(app.channel,"css:copy",this.copyRules)},createSheets:function(b){var c=a("./stylesheet/stylesheet");_.each(b,function(a,b){""!=a.min?""!=a.max?(this.stylesheets[b]=new c(b,"only screen and (min-width: "+a.min+") and (max-width: "+a.max+")"),this.stylesheets[b+"-up"]=new c(b+"-up","only screen and (min-width: "+a.min+")")):this.stylesheets[b]=new c(b,"only screen and (min-width: "+a.min+")"):""!=a.max?this.stylesheets[b]=new c(b,"only screen and (max-width: "+a.max+")"):this.stylesheets[b]=new c(b,"only screen")},this)},onDestroy:function(a){this.deleteRules(a.get("id"))},addRules:function(a){_.each(a,function(a,b){b in this.stylesheets&&this.stylesheets[b].addRules(a)},this)},clearRules:function(){for(var a in this.stylesheets)this.stylesheets.hasOwnProperty(a)&&this.stylesheets[a].clearRules()},copyRules:function(a,b){for(var c in this.stylesheets)if(this.stylesheets.hasOwnProperty(c)){var d=this.stylesheets[c].copyRules("tailor-"+a,"tailor-"+b);if(d.length){var e={};e[c]={},e[c][b]=d,this.addRules(e)}}},deleteRules:function(a){for(var b in this.stylesheets)this.stylesheets.hasOwnProperty(b)&&this.stylesheets[b].deleteRules("tailor-"+a)},updateRules:function(a,b){this.deleteRules(a),this.addRules(b)}})},{"./stylesheet/stylesheet":59}],59:[function(a,b,c){function d(a,b){this.id=a,this.elements=[],this.initialize(b)}d.prototype={initialize:function(a){this.stylesheet=this.createStylesheet(a),this.sheet=this.stylesheet.sheet},createStylesheet:function(a){var b=document.createElement("style");return b.appendChild(document.createTextNode("")),a=a||"screen",b.setAttribute("media",a),b.setAttribute("id","tailor-"+this.id),document.head.appendChild(b),b},addRules:function(a){_.each(a,function(a,b){a.forEach(function(a){"selectors"in a&&"declarations"in a&&Tailor.CSS.addRule(this.sheet,a.selectors,a.declarations,"tailor-"+b)},this)},this)},copyRules:function(a,b){for(var c=[],d=0;d<this.sheet.cssRules.length;d++){var e=this.sheet.cssRules[d];e.selectorText&&e.selectorText.indexOf(a)>-1&&c.push({selectors:e.selectorText.replace(new RegExp(a,"g"),b),declarations:e.style.cssText})}return c},deleteRules:function(a){for(var b=0;b<this.sheet.cssRules.length;b++){var c=this.sheet.cssRules[b];c.selectorText&&c.selectorText.indexOf(a)>-1&&(Tailor.CSS.deleteRule(this.sheet,b),b--)}},clearRules:function(){for(var a=0;a<this.sheet.cssRules.length;a++)Tailor.CSS.deleteRule(this.sheet,a),a--}},b.exports=d},{}],60:[function(a,b,c){b.exports=Marionette.Module.extend({onStart:function(){var b=a("./tools/show/guide"),c=a("./tools/show/select"),d=new b({el:"#guide"});d.render();var e={positionGuide:function(a,b){d.position(a,b)},selectElement:function(a){app.selectRegion.show(new c({model:a.model,collection:app.channel.request("canvas:elements"),view:a}))},resetGuide:function(){d.reset(),app.selectRegion.empty()},getSelectedElement:function(){var a=app.selectRegion.currentView;return a?a.model:null}};this.listenTo(app.channel,"canvas:guide",e.positionGuide),this.listenTo(app.channel,"canvas:select",e.selectElement),this.listenTo(app.channel,"canvas:reset",e.resetGuide),this.listenTo(app.channel,"element:refresh:template",e.resetGuide),app.channel.reply("canvas:element:selected",e.getSelectedElement)}})},{"./tools/show/guide":62,"./tools/show/select":64}],61:[function(a,b,c){b.exports=Backbone.Marionette.Region.extend({onShow:function(a,b,c){a._view.el.classList.add("is-selected")},onEmpty:function(a,b,c){a._view.el.classList.remove("is-selected")}})},{}],62:[function(a,b,c){b.exports=Marionette.ItemView.extend({template:!1,position:function(a,b){var c=a.$el,d=c.offset(),e=this.$el.offsetParent().offset();this.el.style.visibility="visible",this.el.className="guide guide--"+b+" guide--"+a.model.get("tag"),this.el.style.left=d.left-e.left+"px",this.el.style.top=d.top-e.top+"px",this.el.style.width=c.outerWidth()+"px",this.el.style.height=c.outerHeight()+"px",this.el.style.opacity=1},reset:function(){this.el.style.visibility="hidden",this.el.style.opacity=0}})},{}],63:[function(a,b,c){b.exports=Marionette.ItemView.extend({tagName:"a",className:"select__item",events:{click:"onClick"},getTemplate:function(){return _.template("<%= label %>")},onClick:function(a){0===this._index?this.triggerMethod("toggle"):this.model.trigger("select"),a.stopPropagation()}})},{}],64:[function(a,b,c){b.exports=Marionette.CompositeView.extend({className:"select",childView:a("./menu-item"),childViewContainer:".select__menu",ui:{edit:".js-edit",delete:".js-delete"},events:{"click @ui.edit":"editElement","click @ui.delete":"deleteElement"},childEvents:{toggle:"toggleMenu"},template:"#tmpl-tailor-tools-select",serializeData:function(){var a=Backbone.Marionette.CompositeView.prototype.serializeData.apply(this,arguments);return a.siblings=this.collection.where({parent:this.model.get("parent")}).length,a},initialize:function(a){this._view=a.view,this._model=this._view.model},_filteredSortedModels:function(){for(var a=[],b=this.model;"undefined"!=typeof b;)a.push(b),b=this.collection.get(b.get("parent"));return a},onDomRefresh:function(){var a=this.el.parentNode.getBoundingClientRect(),b=this._view.el.getBoundingClientRect();this.el.style.top=b.top-a.top+"px",this.el.style.left=b.left-a.left+"px",this.el.style.width=b.width+"px",this.el.style.height=b.height+"px"},editElement:function(){app.channel.trigger("modal:open",this.model)},deleteElement:function(){this.model.trigger("destroy",this.model),app.channel.trigger("element:delete",this.model)},toggleMenu:function(){this.$el.toggleClass("is-expanded")}})},{"./menu-item":63}],65:[function(a,b,c){var e,d=jQuery,f=window.Tailor,e={url:window.ajaxurl,post:function(a,b){return ajax.send({data:_.isObject(a)?a:_.extend(b||{},{action:a})})},send:function(a,b){return _.isObject(a)?b=a:(b=b||{},b.data=_.extend(b.data||{},{action:a,tailor:1})),b=_.defaults(b||{},{type:"POST",url:ajax.url,context:this}),d.Deferred(function(a){b.success&&a.done(b.success);var c=b.error?b.error:ajax.onError;a.fail(c),delete b.success,delete b.error,d.ajax(b).done(function(b){"1"!==b&&1!==b||(b={success:!0}),_.isObject(b)&&!_.isUndefined(b.success)?a[b.success?"resolveWith":"rejectWith"](this,[b.data]):a.rejectWith(this,[b])}).fail(function(){a.rejectWith(this,arguments)})}).promise()},onError:function(a){f.Notify?a&&a.hasOwnProperty("message")?f.Notify(a.message):"0"==a?f.Notify(window._l10n.expired):"-1"==a?f.Notify(window._l10n.invalid):f.Notify(window._l10n.error):console.error(a)}};b.exports=e},{}],66:[function(a,b,c){var e;Backbone.$;e={addRule:function(a,b,c,d){var e=Tailor.CSS.parseSelectors(b,d),f=Tailor.CSS.parseDeclarations(c);"insertRule"in a?a.insertRule(e+" {"+f+"}",a.cssRules.length):"addRule"in a&&a.addRule(e,f,a.cssRules.length)},deleteRule:function(a,b){"deleteRule"in a?a.deleteRule(b):"removeRule"in a&&a.removeRule(b)},parseSelectors:function(a,b){if(_.isString(a))return a;var d,c=b?".tailor-ui ."+b:"";return a.length?(c&&(a=a.map(function(a){return a=a.indexOf("&")>-1?a.replace("&",c):":"==a.charAt(0)?c+a:c+" "+a})),d=a.join(",.tailor-ui ")):d=c,d},parseDeclarations:function(a){if(_.isString(a))return a;var b="";return _.each(a,function(a,c){b+=c+":"+a+";"}),b}},b.exports=e},{}],67:[function(a,b,c){!function(){function e(a){this.el=a;for(var c=a.className.replace(/^\s+|\s+$/g,"").split(/\s+/),d=0;d<c.length;d++)b.call(this,c[d])}function f(a,b,c){Object.defineProperty?Object.defineProperty(a,b,{get:c}):a.__defineGetter__(b,c)}if(!("undefined"==typeof window.Element||"classList"in document.documentElement)){var a=Array.prototype,b=a.push,c=a.splice,d=a.join;e.prototype={add:function(a){this.contains(a)||(b.call(this,a),this.el.className=this.toString())},contains:function(a){return this.el.className.indexOf(a)!=-1},item:function(a){return this[a]||null},remove:function(a){if(this.contains(a)){for(var b=0;b<this.length&&this[b]!=a;b++);c.call(this,b,1),this.el.className=this.toString()}},toString:function(){return d.call(this," ")},toggle:function(a){return this.contains(a)?this.remove(a):this.add(a),this.contains(a)}},window.DOMTokenList=e,f(Element.prototype,"classList",function(){return new e(this)})}}()},{}],68:[function(a,b,c){!function(a){"use strict";for(var b=0,c=["ms","moz","webkit","o"],d=0;d<c.length&&!a.requestAnimationFrame;++d)a.requestAnimationFrame=a[c[d]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];a.requestAnimationFrame||(a.requestAnimationFrame=function(c,d){var e=(new Date).getTime(),f=Math.max(0,16-(e-b)),g=a.setTimeout(function(){c(e+f)},f);return b=e+f,g}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){clearTimeout(a)})}(window)},{}]},{},[6]);